if ((typeof(h9AP67nN46MQi5f2NQrocNd$3university$0university$1)) == "undefined") {h9AP67nN46MQi5f2NQrocNd$3university$0university$1 = {};
};
(function(){h9AP67nN46MQi5f2NQrocNd$3university$0university$1.eq_lang$2721 = function(v$7680,v$7681){return v$7680 == v$7681;
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.eq_sprite$2725 = function(v$7682,v$7683){return v$7682 == v$7683;
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.eq_dir$2729 = function(v$7684,v$7685){return v$7684 == v$7685;
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.eq_hitkind$2733 = function(v$7686,v$7687){return v$7686 == v$7687;
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.s$sl$61 = function(v$7688,v$7689){return v$7689(v$7688);
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.mapi$68 = function(f$71,xs$74){var fix$7935 = {};
fix$7935.$loop = function(v$7690,v$7691,v$7692){lab$loop: while (true) {if (v$7690 == null) {return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$680(v$7691);
} else {var v$94 = v$7690;
var v$95 = v$94[0];
var v$96 = v$94[1];
var v$7852 = SmlPrims.chk_ovf_i32(v$7692 + 1);
var t$7936 = v$96;
var t$7937 = [f$71([v$7692,v$95]),v$7691];
var t$7938 = v$7852;
var v$7690 = t$7936;
var v$7691 = t$7937;
var v$7692 = t$7938;
continue lab$loop;
};
};
};
var loop$75 = fix$7935.$loop;
return loop$75(xs$74,null,0);
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.ppInt$97 = function(i$100){if (i$100 < 0) {return "-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(i$100))));
} else {return abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(i$100);
};
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.s$d$105 = function(id$108){var v$113 = (function(d,id){return SmlPrims.option(d.getElementById(id));})(z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86,id$108);
switch (v$113[0]) { case 0: {return v$113[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,("no element with id '" + id$108) + "' in DOM"];
} };
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.println$116 = function(s$119){return EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161(s$119 + "\n");
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.serverGet$120 = function(file$123){var file$124;
var t$7942 = file$123 + "?_=";
var t$7941;
var t$7940 = y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.toString$158;
var t$7939;
var v$2757 = SmlPrims.getrealtime();
var v$2758 = v$2757[0];
var v$2759 = v$2757[1];
t$7939 = ((v$2758 - (-2147483648)) + (v$2759 / 1000000.0));
t$7941 = (t$7940(t$7939));
file$124 = (t$7942 + t$7941);
var r$125 = SmlPrims.newRequest();
(function(r,m,u,a){return r.open(m,u,a);})(r$125,"GET",file$124,false);
z11cymP27JOrM6FBeJkkje$3js$0Js$1.send$652(r$125,[1]);
var v$132 = (function(r){return SmlPrims.option(r.responseText);})(r$125);
switch (v$132[0]) { case 0: {return v$132[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"serverGet failed on file " + file$124];
} };
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.serverGetAsync$140 = function(file$143,f$146){var file$147;
var t$7946 = file$143 + "?_=";
var t$7945;
var t$7944 = y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.toString$158;
var t$7943;
var v$2768 = SmlPrims.getrealtime();
var v$2769 = v$2768[0];
var v$2770 = v$2768[1];
t$7943 = ((v$2769 - (-2147483648)) + (v$2770 / 1000000.0));
t$7945 = (t$7944(t$7943));
file$147 = (t$7946 + t$7945);
var r$148 = SmlPrims.newRequest();
(function(r,m,u,a){return r.open(m,u,a);})(r$148,"GET",file$147,true);
(function(r,f){r.onreadystatechange = f;})(r$148,function(v$155){var v$161 = (function(r){return SmlPrims.option(r.status);})(r$148);
switch (v$161[0]) { case 0: {switch (v$161[1]) { case 200: {var v$168 = (function(r){return SmlPrims.option(r.responseText);})(r$148);
switch (v$168[0]) { case 0: {return f$146([0,v$168[1]]);
 break; }default: {return f$146([1]);
} };
 break; }default: {return f$146([1]);
} };
 break; }default: {return 0;
} };
});
z11cymP27JOrM6FBeJkkje$3js$0Js$1.send$652(r$148,[1]);
return 0;
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.look$175 = function(k$178,xs$181){return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(k$178,xs$181);
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.log$182 = function(s$185){var log$186;
var v$2780 = (function(d,id){return SmlPrims.option(d.getElementById(id));})(z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86,"log");
switch (v$2780[0]) { case 0: {log$186 = v$2780[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"no element with id 'log' in DOM"];
} };
(function(e,a){return e.appendChild(a);})(log$186,document.createTextNode(s$185));
return (function(e,a){return e.appendChild(a);})(log$186,document.createElement("br"));
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.windowInnerWidth$189 = function(){return (function(){return window.innerWidth;})();
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.windowInnerHeight$194 = function(){return (function(){return window.innerHeight;})();
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.isMobile$199 = function(){return (((function(){return window.innerWidth;})()) <= 1000)?(((function(){return window.innerHeight;})()) <= 1000):false;
};
var fix$7947 = {};
fix$7947.$prefixzeros = function(i$209,s$212){lab$prefixzeros: while (true) {if (s$212.length < i$209) {var t$7948 = i$209;
var t$7949 = "0" + s$212;
var i$209 = t$7948;
var s$212 = t$7949;
continue lab$prefixzeros;
} else {return s$212;
};
};
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.prefixzeros$206 = fix$7947.$prefixzeros;
((((function(){return window.innerWidth;})()) <= 1000)?(((function(){return window.innerHeight;})()) <= 1000):false)?"mobile":"stationary";
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.deviceStr$222 = ((abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456((function(){return window.innerWidth;})())) + "x") + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456((function(){return window.innerHeight;})()));
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.minimap_p$223 = ((((function(){return window.innerWidth;})()) <= 1000)?(((function(){return window.innerHeight;})()) <= 1000):false)?false:true;
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.speak$226 = function(lang$229,txt$232){var lan$233;
switch (lang$229) { case 1: {lan$233 = "dk-DA";
 break; }default: {lan$233 = "en-GB";
} };
var synth$238 = (function(){return window.speechSynthesis;})();
(function(synth){synth.cancel();})(synth$238);
(function(){window.utterances = [];})();
var msg$244 = (function(txt){return new SpeechSynthesisUtterance(txt);})(txt$232);
(function(u){window.utterances.push(u);})(msg$244);
(function(fp,s,v){fp[s] = v;})(msg$244,"lang",lan$233);
return (function(synth,msg){synth.speak(msg);})(synth$238,msg$244);
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.loadStaff$263 = function(data$266){var jsonToStaff$368 = function(j$371){switch (j$371[0]) { case 2: {var v$383 = j$371[1];
var v$378;
var v$3006;
var v$3009 = DNzgidgaaiBsxwxK6Q4Ukm$3json$0json$1.objLook$96(v$383,"id");
switch (v$3009[0]) { case 0: {v$3006 = v$3009[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find  json object id in staff.json"];
} };
switch (v$3006[0]) { case 0: {v$378 = v$3006[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find string json object id in staff.json"];
} };
var v$379;
var v$3022;
var v$3025 = DNzgidgaaiBsxwxK6Q4Ukm$3json$0json$1.objLook$96(v$383,"name");
switch (v$3025[0]) { case 0: {v$3022 = v$3025[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find  json object name in staff.json"];
} };
switch (v$3022[0]) { case 0: {v$379 = v$3022[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find string json object name in staff.json"];
} };
var t$7962;
var v$3038;
var v$3041 = DNzgidgaaiBsxwxK6Q4Ukm$3json$0json$1.objLook$96(v$383,"avatar");
switch (v$3041[0]) { case 0: {v$3038 = v$3041[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find  json object avatar in staff.json"];
} };
switch (v$3038[0]) { case 0: {t$7962 = v$3038[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find string json object avatar in staff.json"];
} };
var t$7961 = v$378;
var t$7960 = v$379;
var t$7959;
var v$3054;
var v$3057 = DNzgidgaaiBsxwxK6Q4Ukm$3json$0json$1.objLook$96(v$383,"office");
switch (v$3057[0]) { case 0: {v$3054 = v$3057[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find  json object office in staff.json"];
} };
switch (v$3054[0]) { case 0: {t$7959 = v$3054[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find string json object office in staff.json"];
} };
var t$7950;
var v$6773;
var v$6774 = DNzgidgaaiBsxwxK6Q4Ukm$3json$0json$1.objLook$96(v$383,"slides");
switch (v$6774[0]) { case 0: {v$6773 = v$6774[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find  json object slides in staff.json"];
} };
switch (v$6773[0]) { case 6: {var v$6775 = v$6773[1];
var v$6793 = null;
var fix$7951 = {};
fix$7951.$foldr = function(v$6795){if (v$6795 == null) {return v$6793;
} else {var v$6796 = v$6795;
var v$6797 = v$6796[0];
var v$6798 = v$6796[1];
var v$7378 = fix$7951.$foldr(v$6798);
switch (v$6797[0]) { case 2: {var v$6802 = v$6797[1];
var t$7958;
var t$7957;
var t$7956;
var v$6803;
var v$6804 = DNzgidgaaiBsxwxK6Q4Ukm$3json$0json$1.objLook$96(v$6802,"id");
switch (v$6804[0]) { case 0: {v$6803 = v$6804[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find  json object id in staff.json"];
} };
switch (v$6803[0]) { case 0: {t$7956 = v$6803[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find string json object id in staff.json"];
} };
var t$7955;
var v$6805 = DNzgidgaaiBsxwxK6Q4Ukm$3json$0json$1.objLook$96(v$6802,"lang");
switch (v$6805[0]) { case 0: {var v$6806 = v$6805[1];
switch (v$6806[0]) { case 0: {switch (v$6806[1]) { case "EN": {t$7955 = [0,0];
 break; }case "en": {t$7955 = [0,0];
 break; }case "DA": {t$7955 = [0,1];
 break; }case "da": {t$7955 = [0,1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find da or en json object lang in staff.json"];
} };
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find da or en json object lang in staff.json"];
} };
 break; }default: {t$7955 = [1];
} };
var t$7954;
var v$6807;
var t$7953 = abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.fromString$460;
var t$7952;
var v$6808;
var v$6809 = DNzgidgaaiBsxwxK6Q4Ukm$3json$0json$1.objLook$96(v$6802,"pages");
switch (v$6809[0]) { case 0: {v$6808 = v$6809[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find  json object pages in staff.json"];
} };
switch (v$6808[0]) { case 0: {t$7952 = v$6808[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find string json object pages in staff.json"];
} };
v$6807 = (t$7953(t$7952));
switch (v$6807[0]) { case 0: {t$7954 = v$6807[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find int json object pages in staff.json"];
} };
t$7957 = [t$7956,t$7955,t$7954];
t$7958 = [t$7957,v$7378];
return t$7958;
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find ARRAY OBJECT json object slides in staff.json"];
} };
};
};
var foldr$6794 = fix$7951.$foldr;
t$7950 = (foldr$6794(v$6775));
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find ARRAY json object slides in staff.json"];
} };
return [t$7962,t$7961,t$7960,t$7959,t$7950];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to find OBJECT json object ARRAY in staff.json"];
} };
};
return DNzgidgaaiBsxwxK6Q4Ukm$3json$0json$1.foldlArrayJson$963(function(v$387){var v$388 = v$387[0];
var v$389 = v$387[1];
return [jsonToStaff$368(v$388),v$389];
},null,data$266);
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.pagesDeck$390 = function(staff$393,sid$396,did$399){var v$404 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$6811){return v$6811[1] == sid$396;
},staff$393);
switch (v$404[0]) { case 1: {return [1];
 break; }default: {var v$423 = v$404[1];
var v$409 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$6815){return v$6815[0] == did$399;
},v$423[4]);
switch (v$409[0]) { case 1: {return [1];
 break; }default: {return [0,v$409[1][2]];
} };
} };
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.nextSlide$428 = function(staff$431,v$7695,v$7696,v$7697){var did$435 = v$7697[0];
var v$445;
var v$3085 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$3103){return v$3103[1] == v$7695;
},staff$431);
switch (v$3085[0]) { case 1: {v$445 = [1];
 break; }default: {var v$3093 = v$3085[1];
var v$3094 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$3108){return v$3108[0] == did$435;
},v$3093[4]);
switch (v$3094[0]) { case 1: {v$445 = [1];
 break; }default: {v$445 = [0,v$3094[1][2]];
} };
} };
switch (v$445[0]) { case 0: {var v$447 = v$445[1];
return (v$7696[0] = (SmlPrims.mod_i32(SmlPrims.chk_ovf_i32(v$7696[0] + 1),v$447,CompilerInitial.exn$Div$45)),0);
 break; }default: {return 0;
} };
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.prevSlide$453 = function(staff$456,v$7698,v$7699,v$7700){var did$460 = v$7700[0];
var v$470;
var v$3117 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$3135){return v$3135[1] == v$7698;
},staff$456);
switch (v$3117[0]) { case 1: {v$470 = [1];
 break; }default: {var v$3125 = v$3117[1];
var v$3126 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$3140){return v$3140[0] == did$460;
},v$3125[4]);
switch (v$3126[0]) { case 1: {v$470 = [1];
 break; }default: {v$470 = [0,v$3126[1][2]];
} };
} };
switch (v$470[0]) { case 0: {var v$472 = v$470[1];
return (v$7699[0] = (SmlPrims.mod_i32(SmlPrims.chk_ovf_i32((SmlPrims.chk_ovf_i32(v$7699[0] - 1)) + v$472),v$472,CompilerInitial.exn$Div$45)),0);
 break; }default: {return 0;
} };
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.onDeck$478 = function(f$481,staff$484,v$7701,v$7702,v$7703){var v$494 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$6819){return v$6819[1] == v$7701;
},staff$484);
switch (v$494[0]) { case 1: {return 0;
 break; }default: {var v$544 = v$494[1];
var v$545 = v$544[4];
var slides$495 = f$481(v$545);
var did$496 = v$7703[0];
var fix$7963 = {};
fix$7963.$loop = function(v$500){lab$loop: while (true) {if (v$500 == null) {return (slides$495 == null)?0:(v$7703[0] = slides$495[0][0],0);
} else {var v$510 = v$500;
var v$511 = v$510[1];
if (v$511 == null) {return (slides$495 == null)?0:(v$7703[0] = slides$495[0][0],0);
} else {var v$525 = v$510[0];
var v$526 = v$511;
var v$527 = v$526[0];
var v$528 = v$526[1];
if (v$525[0] == did$496) {return (v$7703[0] = v$527[0],0);
} else {var t$7964 = [v$527,v$528];
var v$500 = t$7964;
continue lab$loop;
};
};
};
};
};
var loop$497 = fix$7963.$loop;
loop$497(slides$495);
return (v$7702[0] = 0,0);
} };
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.nextDeck$553 = function(staff$556,v$7704,v$7705,v$7706){var v$3170 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$3202){return v$3202[1] == v$7704;
},staff$556);
switch (v$3170[0]) { case 1: {return 0;
 break; }default: {var v$3178 = v$3170[1];
var v$3179 = v$3178[4];
var did$3181 = v$7706[0];
var fix$7965 = {};
fix$7965.$loop = function(v$3183){lab$loop: while (true) {if (v$3183 == null) {return (v$3179 == null)?0:(v$7706[0] = v$3179[0][0],0);
} else {var v$3184 = v$3183;
var v$3185 = v$3184[1];
if (v$3185 == null) {return (v$3179 == null)?0:(v$7706[0] = v$3179[0][0],0);
} else {var v$3186 = v$3184[0];
var v$3187 = v$3185;
var v$3188 = v$3187[0];
var v$3189 = v$3187[1];
if (v$3186[0] == did$3181) {return (v$7706[0] = v$3188[0],0);
} else {var t$7966 = [v$3188,v$3189];
var v$3183 = t$7966;
continue lab$loop;
};
};
};
};
};
var loop$3182 = fix$7965.$loop;
loop$3182(v$3179);
return (v$7705[0] = 0,0);
} };
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.prevDeck$563 = function(staff$566,v$7707,v$7708,v$7709){var v$3213 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$3245){return v$3245[1] == v$7707;
},staff$566);
switch (v$3213[0]) { case 1: {return 0;
 break; }default: {var v$3221 = v$3213[1];
var v$3222 = v$3221[4];
var slides$3223 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$680(v$3222);
var did$3224 = v$7709[0];
var fix$7967 = {};
fix$7967.$loop = function(v$3226){lab$loop: while (true) {if (v$3226 == null) {return (slides$3223 == null)?0:(v$7709[0] = slides$3223[0][0],0);
} else {var v$3227 = v$3226;
var v$3228 = v$3227[1];
if (v$3228 == null) {return (slides$3223 == null)?0:(v$7709[0] = slides$3223[0][0],0);
} else {var v$3229 = v$3227[0];
var v$3230 = v$3228;
var v$3231 = v$3230[0];
var v$3232 = v$3230[1];
if (v$3229[0] == did$3224) {return (v$7709[0] = v$3231[0],0);
} else {var t$7968 = [v$3231,v$3232];
var v$3226 = t$7968;
continue lab$loop;
};
};
};
};
};
var loop$3225 = fix$7967.$loop;
loop$3225(slides$3223);
return (v$7708[0] = 0,0);
} };
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.isWall$596 = function(v$599){switch (v$599[0]) { case 9: {return false;
 break; }case 8: {return false;
 break; }default: {return true;
} };
};
var mkFun$784 = function(v$7710,v$7711,displays$791){var north$792;
var v$6007 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.filter$415(function(s$795){return (SmlPrims.chk_ovf_i32(s$795[2] - 1)) == v$7711;
},displays$791);
var dists$6849 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(v$6850){var v$6851 = v$6850[0];
var v$6852 = v$6850[1];
var v$6853 = v$6850[2];
var t$7973 = v$6851;
var t$7972;
var t$7971;
var t$7970;
var r$6854 = SmlPrims.chk_ovf_i32(v$6852 - v$7710);
t$7970 = (r$6854 * r$6854);
var t$7969;
var r$6855 = SmlPrims.chk_ovf_i32(v$6853 - v$7711);
t$7969 = (r$6855 * r$6855);
t$7971 = (t$7970 + t$7969);
t$7972 = (Math.sqrt(t$7971));
return [t$7973,t$7972];
},v$6007);
var v$6856;
var fix$7974 = {};
fix$7974.$mini = function(v$6858,v$6859){lab$mini: while (true) {switch (v$6858[0]) { case 1: {if (v$6859 == null) {return v$6858;
} else {var v$6860 = v$6859;
var t$7975 = [0,v$6860[0]];
var t$7976 = v$6860[1];
var v$6858 = t$7975;
var v$6859 = t$7976;
continue lab$mini;
};
 break; }default: {if (v$6859 == null) {return v$6858;
} else {var v$6863 = v$6858[1];
var v$6864 = v$6863[1];
var v$6865 = v$6859;
var v$6866 = v$6865[0];
var v$6867 = v$6866[0];
var v$6868 = v$6866[1];
var v$6869 = v$6865[1];
if (v$6868 < v$6864) {var t$7977 = [0,[v$6867,v$6868]];
var t$7978 = v$6869;
var v$6858 = t$7977;
var v$6859 = t$7978;
continue lab$mini;
} else {var t$7979 = v$6858;
var t$7980 = v$6869;
var v$6858 = t$7979;
var v$6859 = t$7980;
continue lab$mini;
};
};
} };
};
};
var mini$6857 = fix$7974.$mini;
v$6856 = (mini$6857([1],dists$6849));
switch (v$6856[0]) { case 0: {var v$6870 = v$6856[1];
var v$6871 = v$6870[0];
north$792 = [0,v$6871];
 break; }default: {north$792 = [1];
} };
var south$800;
var v$6011 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.filter$415(function(s$803){return (SmlPrims.chk_ovf_i32(s$803[2] + 1)) == v$7711;
},displays$791);
var dists$6897 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(v$6898){var v$6899 = v$6898[0];
var v$6900 = v$6898[1];
var v$6901 = v$6898[2];
var t$7985 = v$6899;
var t$7984;
var t$7983;
var t$7982;
var r$6902 = SmlPrims.chk_ovf_i32(v$6900 - v$7710);
t$7982 = (r$6902 * r$6902);
var t$7981;
var r$6903 = SmlPrims.chk_ovf_i32(v$6901 - v$7711);
t$7981 = (r$6903 * r$6903);
t$7983 = (t$7982 + t$7981);
t$7984 = (Math.sqrt(t$7983));
return [t$7985,t$7984];
},v$6011);
var v$6904;
var fix$7986 = {};
fix$7986.$mini = function(v$6906,v$6907){lab$mini: while (true) {switch (v$6906[0]) { case 1: {if (v$6907 == null) {return v$6906;
} else {var v$6908 = v$6907;
var t$7987 = [0,v$6908[0]];
var t$7988 = v$6908[1];
var v$6906 = t$7987;
var v$6907 = t$7988;
continue lab$mini;
};
 break; }default: {if (v$6907 == null) {return v$6906;
} else {var v$6911 = v$6906[1];
var v$6912 = v$6911[1];
var v$6913 = v$6907;
var v$6914 = v$6913[0];
var v$6915 = v$6914[0];
var v$6916 = v$6914[1];
var v$6917 = v$6913[1];
if (v$6916 < v$6912) {var t$7989 = [0,[v$6915,v$6916]];
var t$7990 = v$6917;
var v$6906 = t$7989;
var v$6907 = t$7990;
continue lab$mini;
} else {var t$7991 = v$6906;
var t$7992 = v$6917;
var v$6906 = t$7991;
var v$6907 = t$7992;
continue lab$mini;
};
};
} };
};
};
var mini$6905 = fix$7986.$mini;
v$6904 = (mini$6905([1],dists$6897));
switch (v$6904[0]) { case 0: {var v$6918 = v$6904[1];
var v$6919 = v$6918[0];
south$800 = [0,v$6919];
 break; }default: {south$800 = [1];
} };
var west$808;
var v$6015 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.filter$415(function(s$811){return (SmlPrims.chk_ovf_i32(s$811[1] + 1)) == v$7710;
},displays$791);
var dists$6945 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(v$6946){var v$6947 = v$6946[0];
var v$6948 = v$6946[1];
var v$6949 = v$6946[2];
var t$7997 = v$6947;
var t$7996;
var t$7995;
var t$7994;
var r$6950 = SmlPrims.chk_ovf_i32(v$6948 - v$7710);
t$7994 = (r$6950 * r$6950);
var t$7993;
var r$6951 = SmlPrims.chk_ovf_i32(v$6949 - v$7711);
t$7993 = (r$6951 * r$6951);
t$7995 = (t$7994 + t$7993);
t$7996 = (Math.sqrt(t$7995));
return [t$7997,t$7996];
},v$6015);
var v$6952;
var fix$7998 = {};
fix$7998.$mini = function(v$6954,v$6955){lab$mini: while (true) {switch (v$6954[0]) { case 1: {if (v$6955 == null) {return v$6954;
} else {var v$6956 = v$6955;
var t$7999 = [0,v$6956[0]];
var t$8000 = v$6956[1];
var v$6954 = t$7999;
var v$6955 = t$8000;
continue lab$mini;
};
 break; }default: {if (v$6955 == null) {return v$6954;
} else {var v$6959 = v$6954[1];
var v$6960 = v$6959[1];
var v$6961 = v$6955;
var v$6962 = v$6961[0];
var v$6963 = v$6962[0];
var v$6964 = v$6962[1];
var v$6965 = v$6961[1];
if (v$6964 < v$6960) {var t$8001 = [0,[v$6963,v$6964]];
var t$8002 = v$6965;
var v$6954 = t$8001;
var v$6955 = t$8002;
continue lab$mini;
} else {var t$8003 = v$6954;
var t$8004 = v$6965;
var v$6954 = t$8003;
var v$6955 = t$8004;
continue lab$mini;
};
};
} };
};
};
var mini$6953 = fix$7998.$mini;
v$6952 = (mini$6953([1],dists$6945));
switch (v$6952[0]) { case 0: {var v$6966 = v$6952[1];
var v$6967 = v$6966[0];
west$808 = [0,v$6967];
 break; }default: {west$808 = [1];
} };
var east$816;
var v$6019 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.filter$415(function(s$819){return (SmlPrims.chk_ovf_i32(s$819[1] - 1)) == v$7710;
},displays$791);
var dists$6993 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(v$6994){var v$6995 = v$6994[0];
var v$6996 = v$6994[1];
var v$6997 = v$6994[2];
var t$8009 = v$6995;
var t$8008;
var t$8007;
var t$8006;
var r$6998 = SmlPrims.chk_ovf_i32(v$6996 - v$7710);
t$8006 = (r$6998 * r$6998);
var t$8005;
var r$6999 = SmlPrims.chk_ovf_i32(v$6997 - v$7711);
t$8005 = (r$6999 * r$6999);
t$8007 = (t$8006 + t$8005);
t$8008 = (Math.sqrt(t$8007));
return [t$8009,t$8008];
},v$6019);
var v$7000;
var fix$8010 = {};
fix$8010.$mini = function(v$7002,v$7003){lab$mini: while (true) {switch (v$7002[0]) { case 1: {if (v$7003 == null) {return v$7002;
} else {var v$7004 = v$7003;
var t$8011 = [0,v$7004[0]];
var t$8012 = v$7004[1];
var v$7002 = t$8011;
var v$7003 = t$8012;
continue lab$mini;
};
 break; }default: {if (v$7003 == null) {return v$7002;
} else {var v$7007 = v$7002[1];
var v$7008 = v$7007[1];
var v$7009 = v$7003;
var v$7010 = v$7009[0];
var v$7011 = v$7010[0];
var v$7012 = v$7010[1];
var v$7013 = v$7009[1];
if (v$7012 < v$7008) {var t$8013 = [0,[v$7011,v$7012]];
var t$8014 = v$7013;
var v$7002 = t$8013;
var v$7003 = t$8014;
continue lab$mini;
} else {var t$8015 = v$7002;
var t$8016 = v$7013;
var v$7002 = t$8015;
var v$7003 = t$8016;
continue lab$mini;
};
};
} };
};
};
var mini$7001 = fix$8010.$mini;
v$7000 = (mini$7001([1],dists$6993));
switch (v$7000[0]) { case 0: {var v$7014 = v$7000[1];
var v$7015 = v$7014[0];
east$816 = [0,v$7015];
 break; }default: {east$816 = [1];
} };
return function(v$842){switch (v$842) { case 2: {return north$792;
 break; }case 1: {return south$800;
 break; }case 3: {return east$816;
 break; }default: {return west$808;
} };
};
};
var dsps$920 = [null];
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.load$921 = function(data$924){var v$934;
var v$3461;
var fix$8017 = {};
fix$8017.$loop = function(v$3463,v$3464){lab$loop: while (true) {if (v$3463 == null) {return [dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$680(v$3464),null];
} else {var v$3465 = v$3463;
var v$3466 = v$3465[0];
switch (v$3466) { case "=": {var v$3467 = v$3465[1];
return [dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$680(v$3464),v$3467];
 break; }default: {var t$8018 = v$3465[1];
var t$8019 = [v$3466,v$3464];
var v$3463 = t$8018;
var v$3464 = t$8019;
continue lab$loop;
} };
};
};
};
var loop$3462 = fix$8017.$loop;
var v$7485 = null;
v$3461 = (loop$3462(h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.tokens$222(function(c$3469){return c$3469 == 10;
},data$924),v$7485));
v$934 = [v$3461[0],dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(s$3475){var v$3476 = h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.tokens$222(function(c$3477){return (c$3477 == 58)?true:(c$3477 == 44);
},s$3475);
if (v$3476 == null) {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to parse display locations in gameMap.txt"];
} else {var v$3482 = v$3476;
var v$3483 = v$3482[1];
if (v$3483 == null) {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to parse display locations in gameMap.txt"];
} else {var v$3484 = v$3483;
var v$3485 = v$3484[1];
if (v$3485 == null) {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to parse display locations in gameMap.txt"];
} else {var v$3486 = v$3485;
if (v$3486[1] == null) {var v$3487 = v$3482[0];
var v$3488 = v$3484[0];
var v$3489 = v$3486[0];
var v$6035 = abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.fromString$460(v$3488);
var v$6036 = abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.fromString$460(v$3489);
switch (v$6035[0]) { case 0: {switch (v$6036[0]) { case 0: {return [v$3487,v$6035[1],v$6036[1]];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to parse integer locations of displays in gameMap.txt"];
} };
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to parse integer locations of displays in gameMap.txt"];
} };
} else {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Failed to parse display locations in gameMap.txt"];
};
};
};
};
},v$3461[1])];
var v$935 = v$934[0];
var v$936 = v$934[1];
(dsps$920[0] = v$936,0);
var t$8037;
var t$8036 = Y5y0a7l58ITwhpccCWLDEa$3basis$0Array2$1.fromList$58;
var t$8035;
var fix$8020 = {};
fix$8020.$loop = function(v$7712,v$7713,v$7714){lab$loop: while (true) {if (v$7712 == null) {return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$680(v$7713);
} else {var v$3502 = v$7712;
var v$3503 = v$3502[0];
var v$3504 = v$3502[1];
var v$7858 = SmlPrims.chk_ovf_i32(v$7714 + 1);
var t$8031 = v$3504;
var t$8030;
var t$8029;
var t$8021;
var e$7019 = null;
var start$7020 = SmlPrims.chk_ovf_i32(v$3503.length - 1);
var fix$8022 = {};
fix$8022.$rl = function(v$7715,v$7716){lab$rl: while (true) {if (v$7715 >= 0) {var t$8026 = SmlPrims.chk_ovf_i32(v$7715 - 1);
var t$8023;
var v$7025 = v$3503.charCodeAt(v$7715);
var t$8025;
var t$8024;
switch (v$7025) { case 32: {t$8024 = [9];
 break; }case 119: {t$8024 = [6];
 break; }case 61: {t$8024 = [5];
 break; }case 37: {t$8024 = [4];
 break; }case 77: {t$8024 = [13,mkFun$784(v$7715,v$7714,v$936)];
 break; }case 78: {t$8024 = [12,mkFun$784(v$7715,v$7714,v$936)];
 break; }case 97: {t$8024 = [1];
 break; }case 98: {t$8024 = [2];
 break; }case 99: {t$8024 = [0];
 break; }case 42: {t$8024 = [7];
 break; }case 72: {t$8024 = [10];
 break; }case 75: {t$8024 = [11];
 break; }case 79: {t$8024 = [3];
 break; }case 73: {t$8024 = [14];
 break; }case 84: {t$8024 = [8,1];
 break; }case 65: {t$8024 = [8,6];
 break; }case 80: {t$8024 = [8,3];
 break; }case 76: {t$8024 = [8,4];
 break; }case 68: {t$8024 = [8,5];
 break; }case 83: {t$8024 = [8,2];
 break; }case 85: {t$8024 = [8,0];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,("unknown character '" + (h8UYb53cympluUQFSuaSASi$3basis$0Char$1.toString$275(v$7025))) + "' in map"];
} };
t$8025 = [t$8024,v$7716];
t$8023 = t$8025;
var t$8027 = t$8026;
var t$8028 = t$8023;
var v$7715 = t$8027;
var v$7716 = t$8028;
continue lab$rl;
} else {return v$7716;
};
};
};
var rl$7021 = fix$8022.$rl;
t$8021 = (rl$7021(start$7020,e$7019));
t$8029 = [t$8021,v$7713];
t$8030 = t$8029;
var t$8032 = t$8031;
var t$8033 = t$8030;
var t$8034 = v$7858;
var v$7712 = t$8032;
var v$7713 = t$8033;
var v$7714 = t$8034;
continue lab$loop;
};
};
};
var loop$3497 = fix$8020.$loop;
t$8035 = (loop$3497(v$935,null,0));
t$8037 = (t$8036(t$8035));
return [t$8037,dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(v$931){return v$931[0];
},v$936)];
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.findClosestDisplay$937 = function(v$7723,v$7724){var displays$3537 = dsps$920[0];
var dists$3538 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(v$3539){var v$3540 = v$3539[0];
var v$3541 = v$3539[1];
var v$3542 = v$3539[2];
var t$8042 = v$3540;
var t$8041;
var t$8040;
var t$8039;
var r$3549 = SmlPrims.chk_ovf_i32(v$3541 - v$7723);
t$8039 = (r$3549 * r$3549);
var t$8038;
var r$3550 = SmlPrims.chk_ovf_i32(v$3542 - v$7724);
t$8038 = (r$3550 * r$3550);
t$8040 = (t$8039 + t$8038);
t$8041 = (Math.sqrt(t$8040));
return [t$8042,t$8041];
},displays$3537);
var v$3551;
var fix$8043 = {};
fix$8043.$mini = function(v$3553,v$3554){lab$mini: while (true) {switch (v$3553[0]) { case 1: {if (v$3554 == null) {return v$3553;
} else {var v$3555 = v$3554;
var t$8044 = [0,v$3555[0]];
var t$8045 = v$3555[1];
var v$3553 = t$8044;
var v$3554 = t$8045;
continue lab$mini;
};
 break; }default: {if (v$3554 == null) {return v$3553;
} else {var v$3558 = v$3553[1];
var v$3559 = v$3558[1];
var v$3560 = v$3554;
var v$3561 = v$3560[0];
var v$3562 = v$3561[0];
var v$3563 = v$3561[1];
var v$3564 = v$3560[1];
if (v$3563 < v$3559) {var t$8046 = [0,[v$3562,v$3563]];
var t$8047 = v$3564;
var v$3553 = t$8046;
var v$3554 = t$8047;
continue lab$mini;
} else {var t$8048 = v$3553;
var t$8049 = v$3564;
var v$3553 = t$8048;
var v$3554 = t$8049;
continue lab$mini;
};
};
} };
};
};
var mini$3552 = fix$8043.$mini;
v$3551 = (mini$3552([1],dists$3538));
switch (v$3551[0]) { case 0: {var v$3565 = v$3551[1];
var v$3566 = v$3565[0];
return [0,v$3566];
 break; }default: {return [1];
} };
};
h9AP67nN46MQi5f2NQrocNd$3university$0university$1.findDisplayState$944 = function(displayContent$947,sid$950){return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$955){return sid$950 == v$955[1];
},displayContent$947);
};
var screenWidth$959 = ((((function(){return window.innerWidth;})()) <= 1000)?(((function(){return window.innerHeight;})()) <= 1000):false)?((function(){return window.innerWidth;})()):(SmlPrims.div_i32(1600,2,CompilerInitial.exn$Div$45));
var screenHeight$964 = ((((function(){return window.innerWidth;})()) <= 1000)?(((function(){return window.innerHeight;})()) <= 1000):false)?((function(){return window.innerHeight;})()):(SmlPrims.div_i32(900,2,CompilerInitial.exn$Div$45));
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("<html><head>\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("<title>Canvas example</title>\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("<link rel='shortcut icon' type='image/x-icon' href='favicon.ico' />\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("<style>\n");
if (((((function(){return window.innerWidth;})()) <= 1000)?(((function(){return window.innerHeight;})()) <= 1000):false)?false:true) {EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("div#minimapcontainer { display : flex; justify-content : center; align-items : center; margin: 10px;}\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161((("canvas#minimap { position : absolute; width : " + ((screenWidth$959 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(screenWidth$959))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(screenWidth$959)))) + "px; }") + "\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161((("canvas#minimapobjects { position : absolute; width : " + ((screenWidth$959 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(screenWidth$959))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(screenWidth$959)))) + "px; }") + "\n");
} else {0;
};
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("div#floor { position : absolute; width : 100%; height : 100%; background-color : rgb(128,128,128); z-index : -10000000; }\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("div#ceiling { position : absolute; width : 100%; height : 50%; background-color : rgb(96,96,96); z-index : -10000000; }\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161((((("#screen { position : relative; width : " + ((screenWidth$959 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(screenWidth$959))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(screenWidth$959)))) + "px; height : ") + ((screenHeight$964 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(screenHeight$964))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(screenHeight$964)))) + "px; border : 0px; overflow : hidden; }") + "\n");
var t$8058 = EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161;
var t$8057;
var t$8056;
var t$8055;
var t$8054;
var t$8053;
var t$8052 = "div#overlay { position : absolute; display : block; width : ";
var t$8051;
var i$3624 = SmlPrims.chk_ovf_i32(screenWidth$959 - 10);
t$8051 = ((i$3624 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(i$3624))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(i$3624)));
t$8053 = (t$8052 + t$8051);
t$8054 = (t$8053 + "px; height : ");
var t$8050;
var i$3626 = SmlPrims.chk_ovf_i32(screenHeight$964 - 10);
t$8050 = ((i$3626 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(i$3626))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(i$3626)));
t$8055 = (t$8054 + t$8050);
t$8056 = (t$8055 + "px; padding : 5px; color : white; font-family : lucida console, courier new; font-size : 20px; z-index : 1; }");
t$8057 = (t$8056 + "\n");
t$8058(t$8057);
((((function(){return window.innerWidth;})()) <= 1000)?(((function(){return window.innerHeight;})()) <= 1000):false)?(EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("html, body {margin: 0; height: 100%; overflow: hidden}\n")):0;
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("</style>\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("</head><body><center>\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("<div id='screen'>\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("<div id='floor'></div>\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("<div id='ceiling'></div>\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("<div id='overlay'></div>\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("</div>\n");
if (((((function(){return window.innerWidth;})()) <= 1000)?(((function(){return window.innerHeight;})()) <= 1000):false)?false:true) {EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("<div id='minimapcontainer'>\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("<canvas id='minimap'></canvas>\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("<canvas id='minimapobjects'></canvas>\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("</div>\n");
} else {0;
};
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("<div id='log'></div>\n");
EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161("</center></body></html>\n");
var v$2685;
try {var t$8065 = h9AP67nN46MQi5f2NQrocNd$3university$0university$1.load$921;
var t$8064;
var file$3660;
var t$8063 = "data/gameMap.txt?_=";
var t$8062;
var t$8061 = y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.toString$158;
var t$8060;
var v$3663 = SmlPrims.getrealtime();
var v$3664 = v$3663[0];
var v$3665 = v$3663[1];
t$8060 = ((v$3664 - (-2147483648)) + (v$3665 / 1000000.0));
t$8062 = (t$8061(t$8060));
file$3660 = (t$8063 + t$8062);
var r$3666 = SmlPrims.newRequest();
(function(r,m,u,a){return r.open(m,u,a);})(r$3666,"GET",file$3660,false);
z11cymP27JOrM6FBeJkkje$3js$0Js$1.send$652(r$3666,[1]);
var v$3669 = (function(r){return SmlPrims.option(r.responseText);})(r$3666);
switch (v$3669[0]) { case 0: {t$8064 = v$3669[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"serverGet failed on file " + file$3660];
} };
v$2685 = (t$8065(t$8064));
} catch(v$8059) {v$2685 = ((function(exn$2692){var t$8066 = exn$2692;
if (t$8066[0] == sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52) {var msg$2689 = exn$2692[1];
var log$3672;
var v$3674 = (function(d,id){return SmlPrims.option(d.getElementById(id));})(z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86,"log");
switch (v$3674[0]) { case 0: {log$3672 = v$3674[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"no element with id 'log' in DOM"];
} };
(function(e,a){return e.appendChild(a);})(log$3672,document.createTextNode(msg$2689));
(function(e,a){return e.appendChild(a);})(log$3672,document.createElement("br"));
throw exn$2692;
} else {throw exn$2692;
};
})(v$8059));
};
var v$2686 = v$2685[0];
var v$2687 = v$2685[1];
var init$1072 = function(items$1075){var screen$1076;
var v$3703 = (function(d,id){return SmlPrims.option(d.getElementById(id));})(z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86,"screen");
switch (v$3703[0]) { case 0: {screen$1076 = v$3703[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"no element with id 'screen' in DOM"];
} };
v$2686[0][0];
var v$7401 = v$2686[0][1];
var v$7402 = v$2686[0][2];
if ((0 <= v$7401)?(v$7401 <= 123456789):false) {0;
} else {throw CompilerInitial.exn$Size$51;
};
var spriteMap$1080;
var v$6155 = [1];
var t$8074;
var t$8067;
var t$3713 = Array(v$7401);
var fix$8068 = {};
fix$8068.$init = function(v$7725,v$7726){lab$init: while (true) {if (v$7726 >= v$7401) {return 0;
} else {var t$8071 = v$7725;
var t$8070 = v$7726;
var t$8069;
if ((0 <= v$7402)?(v$7402 <= 123456789):false) {0;
} else {throw CompilerInitial.exn$Size$51;
};
t$8069 = (SmlPrims.wordTableInit(v$7402,v$6155));
(t$8071[t$8070] = t$8069,0);
var t$8072 = v$7725;
var t$8073 = SmlPrims.chk_ovf_i32(v$7726 + 1);
var v$7725 = t$8072;
var v$7726 = t$8073;
continue lab$init;
};
};
};
var init$3714 = fix$8068.$init;
init$3714(t$3713,0);
t$8067 = t$3713;
t$8074 = [t$8067,v$7401,v$7402];
spriteMap$1080 = [t$8074];
var fix$8075 = {};
fix$8075.$app = function(v$3732){lab$app: while (true) {if (v$3732 == null) {return 0;
} else {var v$3733 = v$3732;
var v$3734 = v$3733[0];
var v$3735 = v$3733[1];
var v$3769 = v$3734[0];
var v$3770 = v$3734[1];
var v$3771 = v$3734[2];
var s$3772;
var pos$3774 = [v$3770,v$3771];
var e$3775 = document.createElement("img");
var t$8078 = e$3775;
var t$8077 = "src";
var t$8076;
switch (v$3769) { case 1: {t$8076 = "tablechairs.png";
 break; }case 6: {t$8076 = (("professor" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32((SmlPrims.mod_i32(SmlPrims.chk_ovf_i32(pos$3774[0] + pos$3774[1]),4,CompilerInitial.exn$Div$45)) + 1)))) + ".gif");
 break; }case 3: {t$8076 = "plantgreen.png";
 break; }case 4: {t$8076 = "lamp.png";
 break; }case 2: {t$8076 = "sink.png";
 break; }case 5: {t$8076 = "desk.png";
 break; }default: {t$8076 = "toilet.png";
} };
(function(fp,s,v){fp[s] = v;})(t$8078,t$8077,t$8076);
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(e$3775,"style"),"display","none");
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(e$3775,"style"),"position","absolute");
var v$3778;
switch (v$3769) { case 1: {v$3778 = true;
 break; }case 6: {v$3778 = true;
 break; }case 3: {v$3778 = true;
 break; }case 4: {v$3778 = false;
 break; }case 2: {v$3778 = false;
 break; }case 5: {v$3778 = true;
 break; }default: {v$3778 = true;
} };
var v$3779 = [false];
s$3772 = [v$3778,[true],e$3775,pos$3774,v$3779];
var v$6163 = [0,s$3772];
var v$3782 = spriteMap$1080[0][0];
spriteMap$1080[0][1];
spriteMap$1080[0][2];
var v$3784 = v$3782.length;
if ((0 <= v$3771)?(v$3771 < v$3784):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
var v$3787 = v$3782[v$3771];
var v$3788 = v$3787.length;
if ((0 <= v$3770)?(v$3770 < v$3788):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
(v$3787[v$3770] = v$6163,0);
(function(e,a){return e.appendChild(a);})(screen$1076,s$3772[2]);
var t$8079 = v$3735;
var v$3732 = t$8079;
continue lab$app;
};
};
};
var app$3731 = fix$8075.$app;
app$3731(items$1075);
return spriteMap$1080;
};
var MaxRotSpeed$1131 = (3.0 * 3.14159265358979323846) / 360.0;
var player$1132;
var v$1133 = [16.0];
var v$1134 = [10.0];
var v$1135 = [0.0];
var v$1136 = [0.0];
var v$1137 = [0.0];
player$1132 = [0.10,v$1135,[0.0],v$1137,v$1136,v$1133,v$1134];
var fov$1140 = (60.0 * 3.14159265358979323846) / 180.0;
var fovHalf$1141 = fov$1140 / 2.0;
var twoPI$1142 = 3.14159265358979323846 * 2.0;
var stripWidthR$1144 = 1;
var miniMapScaleR$1146 = 8;
v$2686[0][0];
v$2686[0][1];
var mapWidth$1148 = v$2686[0][2];
var mapWidthR$1149 = mapWidth$1148;
v$2686[0][0];
var mapHeight$1150;
var v$3802 = v$2686[0][1];
v$2686[0][2];
mapHeight$1150 = v$3802;
var mapHeightR$1151 = mapHeight$1150;
var screenWidthR$1152 = screenWidth$959;
var screenHeightR$1153 = screenHeight$964;
var numRays$1154 = SmlPrims.chk_ovf_i32(Math.ceil(screenWidthR$1152 / stripWidthR$1144));
var viewDist$1155 = (screenWidthR$1152 / 2.0) / ((Math.sin(fovHalf$1141)) / (Math.cos(fovHalf$1141)));
var bindKeys$1174 = function(staff$1177,displayContent$1180){var startSpeak$1181 = function(v$7729,v$7730,v$7731){var base$1185 = v$7731[0];
var idx$1186 = v$7730[0];
var src$1190;
var t$8084;
var t$8083 = ((((("data/" + v$7729) + "/") + base$1185) + "/") + base$1185) + "-";
var t$8082;
var fix$8080 = {};
fix$8080.$prefixzeros = function(s$7029){lab$prefixzeros: while (true) {if (s$7029.length < 3) {var t$8081 = "0" + s$7029;
var s$7029 = t$8081;
continue lab$prefixzeros;
} else {return s$7029;
};
};
};
var prefixzeros$7028 = fix$8080.$prefixzeros;
t$8082 = (prefixzeros$7028(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(idx$1186)));
t$8084 = (t$8083 + t$8082);
src$1190 = (t$8084 + ".txt");
var file$3847;
var t$8088 = src$1190 + "?_=";
var t$8087;
var t$8086 = y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.toString$158;
var t$8085;
var v$3850 = SmlPrims.getrealtime();
var v$3851 = v$3850[0];
var v$3852 = v$3850[1];
t$8085 = ((v$3851 - (-2147483648)) + (v$3852 / 1000000.0));
t$8087 = (t$8086(t$8085));
file$3847 = (t$8088 + t$8087);
var r$3853 = SmlPrims.newRequest();
(function(r,m,u,a){return r.open(m,u,a);})(r$3853,"GET",file$3847,true);
(function(r,f){r.onreadystatechange = f;})(r$3853,function(v$3858){var v$3859 = (function(r){return SmlPrims.option(r.status);})(r$3853);
switch (v$3859[0]) { case 0: {switch (v$3859[1]) { case 200: {var v$3860 = (function(r){return SmlPrims.option(r.responseText);})(r$3853);
switch (v$3860[0]) { case 0: {var v$7032 = [0,v$3860[1]];
var v$7036 = v$7032[1];
var synth$7038 = (function(){return window.speechSynthesis;})();
(function(synth){synth.cancel();})(synth$7038);
(function(){window.utterances = [];})();
var msg$7039 = (function(txt){return new SpeechSynthesisUtterance(txt);})(v$7036);
(function(u){window.utterances.push(u);})(msg$7039);
(function(fp,s,v){fp[s] = v;})(msg$7039,"lang","en-GB");
return (function(synth,msg){synth.speak(msg);})(synth$7038,msg$7039);
 break; }default: {var synth$7042 = (function(){return window.speechSynthesis;})();
(function(synth){synth.cancel();})(synth$7042);
(function(){window.utterances = [];})();
var msg$7043 = (function(txt){return new SpeechSynthesisUtterance(txt);})("");
(function(u){window.utterances.push(u);})(msg$7043);
(function(fp,s,v){fp[s] = v;})(msg$7043,"lang","en-GB");
return (function(synth,msg){synth.speak(msg);})(synth$7042,msg$7043);
} };
 break; }default: {var synth$7050 = (function(){return window.speechSynthesis;})();
(function(synth){synth.cancel();})(synth$7050);
(function(){window.utterances = [];})();
var msg$7051 = (function(txt){return new SpeechSynthesisUtterance(txt);})("");
(function(u){window.utterances.push(u);})(msg$7051);
(function(fp,s,v){fp[s] = v;})(msg$7051,"lang","en-GB");
return (function(synth,msg){synth.speak(msg);})(synth$7050,msg$7051);
} };
 break; }default: {return 0;
} };
});
z11cymP27JOrM6FBeJkkje$3js$0Js$1.send$652(r$3853,[1]);
return 0;
};
(function(f){document.onkeydown = function(e) { e = e || window.event; f(e.keyCode); };})(function(v$1297){switch (v$1297) { case 38: {return (player$1132[4][0] = 1.0,0);
 break; }case 40: {return (player$1132[4][0] = (-1.0),0);
 break; }case 37: {var rotAcc$1307 = player$1132[2];
return (rotAcc$1307[0] > (-0.5))?(rotAcc$1307[0] = (rotAcc$1307[0] - 0.1),0):0;
 break; }case 39: {var rotAcc$1298 = player$1132[2];
return (rotAcc$1298[0] < 0.5)?(rotAcc$1298[0] = (rotAcc$1298[0] + 0.1),0):0;
 break; }case 112: {var x$3991 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[5][0]));
var y$3992 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[6][0]));
var v$3993;
var displays$3997 = dsps$920[0];
var dists$3998 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(v$3999){var v$4000 = v$3999[0];
var v$4001 = v$3999[1];
var v$4002 = v$3999[2];
var t$8197 = v$4000;
var t$8196;
var t$8195;
var t$8194;
var r$4003 = SmlPrims.chk_ovf_i32(v$4001 - x$3991);
t$8194 = (r$4003 * r$4003);
var t$8193;
var r$4004 = SmlPrims.chk_ovf_i32(v$4002 - y$3992);
t$8193 = (r$4004 * r$4004);
t$8195 = (t$8194 + t$8193);
t$8196 = (Math.sqrt(t$8195));
return [t$8197,t$8196];
},displays$3997);
var v$4005;
var fix$8198 = {};
fix$8198.$mini = function(v$4007,v$4008){lab$mini: while (true) {switch (v$4007[0]) { case 1: {if (v$4008 == null) {return v$4007;
} else {var v$4009 = v$4008;
var t$8199 = [0,v$4009[0]];
var t$8200 = v$4009[1];
var v$4007 = t$8199;
var v$4008 = t$8200;
continue lab$mini;
};
 break; }default: {if (v$4008 == null) {return v$4007;
} else {var v$4012 = v$4007[1];
var v$4013 = v$4012[1];
var v$4014 = v$4008;
var v$4015 = v$4014[0];
var v$4016 = v$4015[0];
var v$4017 = v$4015[1];
var v$4018 = v$4014[1];
if (v$4017 < v$4013) {var t$8201 = [0,[v$4016,v$4017]];
var t$8202 = v$4018;
var v$4007 = t$8201;
var v$4008 = t$8202;
continue lab$mini;
} else {var t$8203 = v$4007;
var t$8204 = v$4018;
var v$4007 = t$8203;
var v$4008 = t$8204;
continue lab$mini;
};
};
} };
};
};
var mini$4006 = fix$8198.$mini;
v$4005 = (mini$4006([1],dists$3998));
switch (v$4005[0]) { case 0: {var v$4019 = v$4005[1];
var v$4020 = v$4019[0];
v$3993 = [0,v$4020];
 break; }default: {v$3993 = [1];
} };
switch (v$3993[0]) { case 1: {return 0;
 break; }default: {var v$4021 = v$3993[1];
var v$4022 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$4025){return v$4021 == v$4025[1];
},displayContent$1180);
switch (v$4022[0]) { case 1: {return 0;
 break; }default: {var v$4029 = v$4022[1];
var v$7057 = v$4029[1];
var v$7058 = v$4029[2];
var v$7059 = v$4029[0];
var did$7060 = v$7059[0];
var v$7061;
var v$7062 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$7063){return v$7063[1] == v$7057;
},staff$1177);
switch (v$7062[0]) { case 1: {v$7061 = [1];
 break; }default: {var v$7064 = v$7062[1];
var v$7065 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$7067){return v$7067[0] == did$7060;
},v$7064[4]);
switch (v$7065[0]) { case 1: {v$7061 = [1];
 break; }default: {v$7061 = [0,v$7065[1][2]];
} };
} };
switch (v$7061[0]) { case 0: {var v$7068 = v$7061[1];
(v$7058[0] = (SmlPrims.mod_i32(SmlPrims.chk_ovf_i32((SmlPrims.chk_ovf_i32(v$7058[0] - 1)) + v$7068),v$7068,CompilerInitial.exn$Div$45)),0);
 break; }default: {0;
} };
return startSpeak$1181(v$4029[1],v$4029[2],v$4029[0]);
} };
} };
 break; }case 80: {var x$4055 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[5][0]));
var y$4056 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[6][0]));
var v$4057;
var displays$4061 = dsps$920[0];
var dists$4062 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(v$4063){var v$4064 = v$4063[0];
var v$4065 = v$4063[1];
var v$4066 = v$4063[2];
var t$8185 = v$4064;
var t$8184;
var t$8183;
var t$8182;
var r$4067 = SmlPrims.chk_ovf_i32(v$4065 - x$4055);
t$8182 = (r$4067 * r$4067);
var t$8181;
var r$4068 = SmlPrims.chk_ovf_i32(v$4066 - y$4056);
t$8181 = (r$4068 * r$4068);
t$8183 = (t$8182 + t$8181);
t$8184 = (Math.sqrt(t$8183));
return [t$8185,t$8184];
},displays$4061);
var v$4069;
var fix$8186 = {};
fix$8186.$mini = function(v$4071,v$4072){lab$mini: while (true) {switch (v$4071[0]) { case 1: {if (v$4072 == null) {return v$4071;
} else {var v$4073 = v$4072;
var t$8187 = [0,v$4073[0]];
var t$8188 = v$4073[1];
var v$4071 = t$8187;
var v$4072 = t$8188;
continue lab$mini;
};
 break; }default: {if (v$4072 == null) {return v$4071;
} else {var v$4076 = v$4071[1];
var v$4077 = v$4076[1];
var v$4078 = v$4072;
var v$4079 = v$4078[0];
var v$4080 = v$4079[0];
var v$4081 = v$4079[1];
var v$4082 = v$4078[1];
if (v$4081 < v$4077) {var t$8189 = [0,[v$4080,v$4081]];
var t$8190 = v$4082;
var v$4071 = t$8189;
var v$4072 = t$8190;
continue lab$mini;
} else {var t$8191 = v$4071;
var t$8192 = v$4082;
var v$4071 = t$8191;
var v$4072 = t$8192;
continue lab$mini;
};
};
} };
};
};
var mini$4070 = fix$8186.$mini;
v$4069 = (mini$4070([1],dists$4062));
switch (v$4069[0]) { case 0: {var v$4083 = v$4069[1];
var v$4084 = v$4083[0];
v$4057 = [0,v$4084];
 break; }default: {v$4057 = [1];
} };
switch (v$4057[0]) { case 1: {return 0;
 break; }default: {var v$4085 = v$4057[1];
var v$4086 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$4089){return v$4085 == v$4089[1];
},displayContent$1180);
switch (v$4086[0]) { case 1: {return 0;
 break; }default: {var v$4093 = v$4086[1];
var v$7070 = v$4093[1];
var v$7071 = v$4093[2];
var v$7072 = v$4093[0];
var did$7073 = v$7072[0];
var v$7074;
var v$7075 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$7076){return v$7076[1] == v$7070;
},staff$1177);
switch (v$7075[0]) { case 1: {v$7074 = [1];
 break; }default: {var v$7077 = v$7075[1];
var v$7078 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$7080){return v$7080[0] == did$7073;
},v$7077[4]);
switch (v$7078[0]) { case 1: {v$7074 = [1];
 break; }default: {v$7074 = [0,v$7078[1][2]];
} };
} };
switch (v$7074[0]) { case 0: {var v$7081 = v$7074[1];
(v$7071[0] = (SmlPrims.mod_i32(SmlPrims.chk_ovf_i32((SmlPrims.chk_ovf_i32(v$7071[0] - 1)) + v$7081),v$7081,CompilerInitial.exn$Div$45)),0);
 break; }default: {0;
} };
return startSpeak$1181(v$4093[1],v$4093[2],v$4093[0]);
} };
} };
 break; }case 110: {var x$4119 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[5][0]));
var y$4120 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[6][0]));
var v$4121;
var displays$4125 = dsps$920[0];
var dists$4126 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(v$4127){var v$4128 = v$4127[0];
var v$4129 = v$4127[1];
var v$4130 = v$4127[2];
var t$8173 = v$4128;
var t$8172;
var t$8171;
var t$8170;
var r$4131 = SmlPrims.chk_ovf_i32(v$4129 - x$4119);
t$8170 = (r$4131 * r$4131);
var t$8169;
var r$4132 = SmlPrims.chk_ovf_i32(v$4130 - y$4120);
t$8169 = (r$4132 * r$4132);
t$8171 = (t$8170 + t$8169);
t$8172 = (Math.sqrt(t$8171));
return [t$8173,t$8172];
},displays$4125);
var v$4133;
var fix$8174 = {};
fix$8174.$mini = function(v$4135,v$4136){lab$mini: while (true) {switch (v$4135[0]) { case 1: {if (v$4136 == null) {return v$4135;
} else {var v$4137 = v$4136;
var t$8175 = [0,v$4137[0]];
var t$8176 = v$4137[1];
var v$4135 = t$8175;
var v$4136 = t$8176;
continue lab$mini;
};
 break; }default: {if (v$4136 == null) {return v$4135;
} else {var v$4140 = v$4135[1];
var v$4141 = v$4140[1];
var v$4142 = v$4136;
var v$4143 = v$4142[0];
var v$4144 = v$4143[0];
var v$4145 = v$4143[1];
var v$4146 = v$4142[1];
if (v$4145 < v$4141) {var t$8177 = [0,[v$4144,v$4145]];
var t$8178 = v$4146;
var v$4135 = t$8177;
var v$4136 = t$8178;
continue lab$mini;
} else {var t$8179 = v$4135;
var t$8180 = v$4146;
var v$4135 = t$8179;
var v$4136 = t$8180;
continue lab$mini;
};
};
} };
};
};
var mini$4134 = fix$8174.$mini;
v$4133 = (mini$4134([1],dists$4126));
switch (v$4133[0]) { case 0: {var v$4147 = v$4133[1];
var v$4148 = v$4147[0];
v$4121 = [0,v$4148];
 break; }default: {v$4121 = [1];
} };
switch (v$4121[0]) { case 1: {return 0;
 break; }default: {var v$4149 = v$4121[1];
var v$4150 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$4153){return v$4149 == v$4153[1];
},displayContent$1180);
switch (v$4150[0]) { case 1: {return 0;
 break; }default: {var v$4157 = v$4150[1];
var v$7083 = v$4157[1];
var v$7084 = v$4157[2];
var v$7085 = v$4157[0];
var did$7086 = v$7085[0];
var v$7087;
var v$7088 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$7089){return v$7089[1] == v$7083;
},staff$1177);
switch (v$7088[0]) { case 1: {v$7087 = [1];
 break; }default: {var v$7090 = v$7088[1];
var v$7091 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$7093){return v$7093[0] == did$7086;
},v$7090[4]);
switch (v$7091[0]) { case 1: {v$7087 = [1];
 break; }default: {v$7087 = [0,v$7091[1][2]];
} };
} };
switch (v$7087[0]) { case 0: {var v$7094 = v$7087[1];
(v$7084[0] = (SmlPrims.mod_i32(SmlPrims.chk_ovf_i32(v$7084[0] + 1),v$7094,CompilerInitial.exn$Div$45)),0);
 break; }default: {0;
} };
return startSpeak$1181(v$4157[1],v$4157[2],v$4157[0]);
} };
} };
 break; }case 78: {var x$4183 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[5][0]));
var y$4184 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[6][0]));
var v$4185;
var displays$4189 = dsps$920[0];
var dists$4190 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(v$4191){var v$4192 = v$4191[0];
var v$4193 = v$4191[1];
var v$4194 = v$4191[2];
var t$8161 = v$4192;
var t$8160;
var t$8159;
var t$8158;
var r$4195 = SmlPrims.chk_ovf_i32(v$4193 - x$4183);
t$8158 = (r$4195 * r$4195);
var t$8157;
var r$4196 = SmlPrims.chk_ovf_i32(v$4194 - y$4184);
t$8157 = (r$4196 * r$4196);
t$8159 = (t$8158 + t$8157);
t$8160 = (Math.sqrt(t$8159));
return [t$8161,t$8160];
},displays$4189);
var v$4197;
var fix$8162 = {};
fix$8162.$mini = function(v$4199,v$4200){lab$mini: while (true) {switch (v$4199[0]) { case 1: {if (v$4200 == null) {return v$4199;
} else {var v$4201 = v$4200;
var t$8163 = [0,v$4201[0]];
var t$8164 = v$4201[1];
var v$4199 = t$8163;
var v$4200 = t$8164;
continue lab$mini;
};
 break; }default: {if (v$4200 == null) {return v$4199;
} else {var v$4204 = v$4199[1];
var v$4205 = v$4204[1];
var v$4206 = v$4200;
var v$4207 = v$4206[0];
var v$4208 = v$4207[0];
var v$4209 = v$4207[1];
var v$4210 = v$4206[1];
if (v$4209 < v$4205) {var t$8165 = [0,[v$4208,v$4209]];
var t$8166 = v$4210;
var v$4199 = t$8165;
var v$4200 = t$8166;
continue lab$mini;
} else {var t$8167 = v$4199;
var t$8168 = v$4210;
var v$4199 = t$8167;
var v$4200 = t$8168;
continue lab$mini;
};
};
} };
};
};
var mini$4198 = fix$8162.$mini;
v$4197 = (mini$4198([1],dists$4190));
switch (v$4197[0]) { case 0: {var v$4211 = v$4197[1];
var v$4212 = v$4211[0];
v$4185 = [0,v$4212];
 break; }default: {v$4185 = [1];
} };
switch (v$4185[0]) { case 1: {return 0;
 break; }default: {var v$4213 = v$4185[1];
var v$4214 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$4217){return v$4213 == v$4217[1];
},displayContent$1180);
switch (v$4214[0]) { case 1: {return 0;
 break; }default: {var v$4221 = v$4214[1];
var v$7096 = v$4221[1];
var v$7097 = v$4221[2];
var v$7098 = v$4221[0];
var did$7099 = v$7098[0];
var v$7100;
var v$7101 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$7102){return v$7102[1] == v$7096;
},staff$1177);
switch (v$7101[0]) { case 1: {v$7100 = [1];
 break; }default: {var v$7103 = v$7101[1];
var v$7104 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$7106){return v$7106[0] == did$7099;
},v$7103[4]);
switch (v$7104[0]) { case 1: {v$7100 = [1];
 break; }default: {v$7100 = [0,v$7104[1][2]];
} };
} };
switch (v$7100[0]) { case 0: {var v$7107 = v$7100[1];
(v$7097[0] = (SmlPrims.mod_i32(SmlPrims.chk_ovf_i32(v$7097[0] + 1),v$7107,CompilerInitial.exn$Div$45)),0);
 break; }default: {0;
} };
return startSpeak$1181(v$4221[1],v$4221[2],v$4221[0]);
} };
} };
 break; }case 32: {var x$4247 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[5][0]));
var y$4248 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[6][0]));
var v$4249;
var displays$4253 = dsps$920[0];
var dists$4254 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(v$4255){var v$4256 = v$4255[0];
var v$4257 = v$4255[1];
var v$4258 = v$4255[2];
var t$8149 = v$4256;
var t$8148;
var t$8147;
var t$8146;
var r$4259 = SmlPrims.chk_ovf_i32(v$4257 - x$4247);
t$8146 = (r$4259 * r$4259);
var t$8145;
var r$4260 = SmlPrims.chk_ovf_i32(v$4258 - y$4248);
t$8145 = (r$4260 * r$4260);
t$8147 = (t$8146 + t$8145);
t$8148 = (Math.sqrt(t$8147));
return [t$8149,t$8148];
},displays$4253);
var v$4261;
var fix$8150 = {};
fix$8150.$mini = function(v$4263,v$4264){lab$mini: while (true) {switch (v$4263[0]) { case 1: {if (v$4264 == null) {return v$4263;
} else {var v$4265 = v$4264;
var t$8151 = [0,v$4265[0]];
var t$8152 = v$4265[1];
var v$4263 = t$8151;
var v$4264 = t$8152;
continue lab$mini;
};
 break; }default: {if (v$4264 == null) {return v$4263;
} else {var v$4268 = v$4263[1];
var v$4269 = v$4268[1];
var v$4270 = v$4264;
var v$4271 = v$4270[0];
var v$4272 = v$4271[0];
var v$4273 = v$4271[1];
var v$4274 = v$4270[1];
if (v$4273 < v$4269) {var t$8153 = [0,[v$4272,v$4273]];
var t$8154 = v$4274;
var v$4263 = t$8153;
var v$4264 = t$8154;
continue lab$mini;
} else {var t$8155 = v$4263;
var t$8156 = v$4274;
var v$4263 = t$8155;
var v$4264 = t$8156;
continue lab$mini;
};
};
} };
};
};
var mini$4262 = fix$8150.$mini;
v$4261 = (mini$4262([1],dists$4254));
switch (v$4261[0]) { case 0: {var v$4275 = v$4261[1];
var v$4276 = v$4275[0];
v$4249 = [0,v$4276];
 break; }default: {v$4249 = [1];
} };
switch (v$4249[0]) { case 1: {return 0;
 break; }default: {var v$4277 = v$4249[1];
var v$4278 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$4281){return v$4277 == v$4281[1];
},displayContent$1180);
switch (v$4278[0]) { case 1: {return 0;
 break; }default: {var v$4285 = v$4278[1];
var v$7109 = v$4285[1];
var v$7110 = v$4285[2];
var v$7111 = v$4285[0];
var did$7112 = v$7111[0];
var v$7113;
var v$7114 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$7115){return v$7115[1] == v$7109;
},staff$1177);
switch (v$7114[0]) { case 1: {v$7113 = [1];
 break; }default: {var v$7116 = v$7114[1];
var v$7117 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$7119){return v$7119[0] == did$7112;
},v$7116[4]);
switch (v$7117[0]) { case 1: {v$7113 = [1];
 break; }default: {v$7113 = [0,v$7117[1][2]];
} };
} };
switch (v$7113[0]) { case 0: {var v$7120 = v$7113[1];
(v$7110[0] = (SmlPrims.mod_i32(SmlPrims.chk_ovf_i32(v$7110[0] + 1),v$7120,CompilerInitial.exn$Div$45)),0);
 break; }default: {0;
} };
return startSpeak$1181(v$4285[1],v$4285[2],v$4285[0]);
} };
} };
 break; }case 97: {var x$4311 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[5][0]));
var y$4312 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[6][0]));
var v$4313;
var displays$4317 = dsps$920[0];
var dists$4318 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(v$4319){var v$4320 = v$4319[0];
var v$4321 = v$4319[1];
var v$4322 = v$4319[2];
var t$8135 = v$4320;
var t$8134;
var t$8133;
var t$8132;
var r$4323 = SmlPrims.chk_ovf_i32(v$4321 - x$4311);
t$8132 = (r$4323 * r$4323);
var t$8131;
var r$4324 = SmlPrims.chk_ovf_i32(v$4322 - y$4312);
t$8131 = (r$4324 * r$4324);
t$8133 = (t$8132 + t$8131);
t$8134 = (Math.sqrt(t$8133));
return [t$8135,t$8134];
},displays$4317);
var v$4325;
var fix$8136 = {};
fix$8136.$mini = function(v$4327,v$4328){lab$mini: while (true) {switch (v$4327[0]) { case 1: {if (v$4328 == null) {return v$4327;
} else {var v$4329 = v$4328;
var t$8137 = [0,v$4329[0]];
var t$8138 = v$4329[1];
var v$4327 = t$8137;
var v$4328 = t$8138;
continue lab$mini;
};
 break; }default: {if (v$4328 == null) {return v$4327;
} else {var v$4332 = v$4327[1];
var v$4333 = v$4332[1];
var v$4334 = v$4328;
var v$4335 = v$4334[0];
var v$4336 = v$4335[0];
var v$4337 = v$4335[1];
var v$4338 = v$4334[1];
if (v$4337 < v$4333) {var t$8139 = [0,[v$4336,v$4337]];
var t$8140 = v$4338;
var v$4327 = t$8139;
var v$4328 = t$8140;
continue lab$mini;
} else {var t$8141 = v$4327;
var t$8142 = v$4338;
var v$4327 = t$8141;
var v$4328 = t$8142;
continue lab$mini;
};
};
} };
};
};
var mini$4326 = fix$8136.$mini;
v$4325 = (mini$4326([1],dists$4318));
switch (v$4325[0]) { case 0: {var v$4339 = v$4325[1];
var v$4340 = v$4339[0];
v$4313 = [0,v$4340];
 break; }default: {v$4313 = [1];
} };
switch (v$4313[0]) { case 1: {return 0;
 break; }default: {var v$4341 = v$4313[1];
var v$4342 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$4345){return v$4341 == v$4345[1];
},displayContent$1180);
switch (v$4342[0]) { case 1: {return 0;
 break; }default: {var v$4349 = v$4342[1];
var v$7122 = v$4349[1];
var v$7123 = v$4349[2];
var v$7124 = v$4349[0];
var v$7125 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$7126){return v$7126[1] == v$7122;
},staff$1177);
switch (v$7125[0]) { case 1: {0;
 break; }default: {var v$7127 = v$7125[1];
var v$7128 = v$7127[4];
var slides$7129 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$680(v$7128);
var did$7130 = v$7124[0];
var fix$8143 = {};
fix$8143.$loop = function(v$7132){lab$loop: while (true) {if (v$7132 == null) {return (slides$7129 == null)?0:(v$7124[0] = slides$7129[0][0],0);
} else {var v$7133 = v$7132;
var v$7134 = v$7133[1];
if (v$7134 == null) {return (slides$7129 == null)?0:(v$7124[0] = slides$7129[0][0],0);
} else {var v$7135 = v$7133[0];
var v$7136 = v$7134;
var v$7137 = v$7136[0];
var v$7138 = v$7136[1];
if (v$7135[0] == did$7130) {return (v$7124[0] = v$7137[0],0);
} else {var t$8144 = [v$7137,v$7138];
var v$7132 = t$8144;
continue lab$loop;
};
};
};
};
};
var loop$7131 = fix$8143.$loop;
loop$7131(slides$7129);
(v$7123[0] = 0,0);
} };
return startSpeak$1181(v$4349[1],v$4349[2],v$4349[0]);
} };
} };
 break; }case 65: {var x$4386 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[5][0]));
var y$4387 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[6][0]));
var v$4388;
var displays$4392 = dsps$920[0];
var dists$4393 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(v$4394){var v$4395 = v$4394[0];
var v$4396 = v$4394[1];
var v$4397 = v$4394[2];
var t$8121 = v$4395;
var t$8120;
var t$8119;
var t$8118;
var r$4398 = SmlPrims.chk_ovf_i32(v$4396 - x$4386);
t$8118 = (r$4398 * r$4398);
var t$8117;
var r$4399 = SmlPrims.chk_ovf_i32(v$4397 - y$4387);
t$8117 = (r$4399 * r$4399);
t$8119 = (t$8118 + t$8117);
t$8120 = (Math.sqrt(t$8119));
return [t$8121,t$8120];
},displays$4392);
var v$4400;
var fix$8122 = {};
fix$8122.$mini = function(v$4402,v$4403){lab$mini: while (true) {switch (v$4402[0]) { case 1: {if (v$4403 == null) {return v$4402;
} else {var v$4404 = v$4403;
var t$8123 = [0,v$4404[0]];
var t$8124 = v$4404[1];
var v$4402 = t$8123;
var v$4403 = t$8124;
continue lab$mini;
};
 break; }default: {if (v$4403 == null) {return v$4402;
} else {var v$4407 = v$4402[1];
var v$4408 = v$4407[1];
var v$4409 = v$4403;
var v$4410 = v$4409[0];
var v$4411 = v$4410[0];
var v$4412 = v$4410[1];
var v$4413 = v$4409[1];
if (v$4412 < v$4408) {var t$8125 = [0,[v$4411,v$4412]];
var t$8126 = v$4413;
var v$4402 = t$8125;
var v$4403 = t$8126;
continue lab$mini;
} else {var t$8127 = v$4402;
var t$8128 = v$4413;
var v$4402 = t$8127;
var v$4403 = t$8128;
continue lab$mini;
};
};
} };
};
};
var mini$4401 = fix$8122.$mini;
v$4400 = (mini$4401([1],dists$4393));
switch (v$4400[0]) { case 0: {var v$4414 = v$4400[1];
var v$4415 = v$4414[0];
v$4388 = [0,v$4415];
 break; }default: {v$4388 = [1];
} };
switch (v$4388[0]) { case 1: {return 0;
 break; }default: {var v$4416 = v$4388[1];
var v$4417 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$4420){return v$4416 == v$4420[1];
},displayContent$1180);
switch (v$4417[0]) { case 1: {return 0;
 break; }default: {var v$4424 = v$4417[1];
var v$7140 = v$4424[1];
var v$7141 = v$4424[2];
var v$7142 = v$4424[0];
var v$7143 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$7144){return v$7144[1] == v$7140;
},staff$1177);
switch (v$7143[0]) { case 1: {0;
 break; }default: {var v$7145 = v$7143[1];
var v$7146 = v$7145[4];
var slides$7147 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$680(v$7146);
var did$7148 = v$7142[0];
var fix$8129 = {};
fix$8129.$loop = function(v$7150){lab$loop: while (true) {if (v$7150 == null) {return (slides$7147 == null)?0:(v$7142[0] = slides$7147[0][0],0);
} else {var v$7151 = v$7150;
var v$7152 = v$7151[1];
if (v$7152 == null) {return (slides$7147 == null)?0:(v$7142[0] = slides$7147[0][0],0);
} else {var v$7153 = v$7151[0];
var v$7154 = v$7152;
var v$7155 = v$7154[0];
var v$7156 = v$7154[1];
if (v$7153[0] == did$7148) {return (v$7142[0] = v$7155[0],0);
} else {var t$8130 = [v$7155,v$7156];
var v$7150 = t$8130;
continue lab$loop;
};
};
};
};
};
var loop$7149 = fix$8129.$loop;
loop$7149(slides$7147);
(v$7141[0] = 0,0);
} };
return startSpeak$1181(v$4424[1],v$4424[2],v$4424[0]);
} };
} };
 break; }case 115: {var x$4461 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[5][0]));
var y$4462 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[6][0]));
var v$4463;
var displays$4467 = dsps$920[0];
var dists$4468 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(v$4469){var v$4470 = v$4469[0];
var v$4471 = v$4469[1];
var v$4472 = v$4469[2];
var t$8107 = v$4470;
var t$8106;
var t$8105;
var t$8104;
var r$4473 = SmlPrims.chk_ovf_i32(v$4471 - x$4461);
t$8104 = (r$4473 * r$4473);
var t$8103;
var r$4474 = SmlPrims.chk_ovf_i32(v$4472 - y$4462);
t$8103 = (r$4474 * r$4474);
t$8105 = (t$8104 + t$8103);
t$8106 = (Math.sqrt(t$8105));
return [t$8107,t$8106];
},displays$4467);
var v$4475;
var fix$8108 = {};
fix$8108.$mini = function(v$4477,v$4478){lab$mini: while (true) {switch (v$4477[0]) { case 1: {if (v$4478 == null) {return v$4477;
} else {var v$4479 = v$4478;
var t$8109 = [0,v$4479[0]];
var t$8110 = v$4479[1];
var v$4477 = t$8109;
var v$4478 = t$8110;
continue lab$mini;
};
 break; }default: {if (v$4478 == null) {return v$4477;
} else {var v$4482 = v$4477[1];
var v$4483 = v$4482[1];
var v$4484 = v$4478;
var v$4485 = v$4484[0];
var v$4486 = v$4485[0];
var v$4487 = v$4485[1];
var v$4488 = v$4484[1];
if (v$4487 < v$4483) {var t$8111 = [0,[v$4486,v$4487]];
var t$8112 = v$4488;
var v$4477 = t$8111;
var v$4478 = t$8112;
continue lab$mini;
} else {var t$8113 = v$4477;
var t$8114 = v$4488;
var v$4477 = t$8113;
var v$4478 = t$8114;
continue lab$mini;
};
};
} };
};
};
var mini$4476 = fix$8108.$mini;
v$4475 = (mini$4476([1],dists$4468));
switch (v$4475[0]) { case 0: {var v$4489 = v$4475[1];
var v$4490 = v$4489[0];
v$4463 = [0,v$4490];
 break; }default: {v$4463 = [1];
} };
switch (v$4463[0]) { case 1: {return 0;
 break; }default: {var v$4491 = v$4463[1];
var v$4492 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$4495){return v$4491 == v$4495[1];
},displayContent$1180);
switch (v$4492[0]) { case 1: {return 0;
 break; }default: {var v$4499 = v$4492[1];
var v$7158 = v$4499[1];
var v$7159 = v$4499[2];
var v$7160 = v$4499[0];
var v$7161 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$7162){return v$7162[1] == v$7158;
},staff$1177);
switch (v$7161[0]) { case 1: {0;
 break; }default: {var v$7163 = v$7161[1];
var v$7164 = v$7163[4];
var did$7165 = v$7160[0];
var fix$8115 = {};
fix$8115.$loop = function(v$7167){lab$loop: while (true) {if (v$7167 == null) {return (v$7164 == null)?0:(v$7160[0] = v$7164[0][0],0);
} else {var v$7168 = v$7167;
var v$7169 = v$7168[1];
if (v$7169 == null) {return (v$7164 == null)?0:(v$7160[0] = v$7164[0][0],0);
} else {var v$7170 = v$7168[0];
var v$7171 = v$7169;
var v$7172 = v$7171[0];
var v$7173 = v$7171[1];
if (v$7170[0] == did$7165) {return (v$7160[0] = v$7172[0],0);
} else {var t$8116 = [v$7172,v$7173];
var v$7167 = t$8116;
continue lab$loop;
};
};
};
};
};
var loop$7166 = fix$8115.$loop;
loop$7166(v$7164);
(v$7159[0] = 0,0);
} };
return startSpeak$1181(v$4499[1],v$4499[2],v$4499[0]);
} };
} };
 break; }case 83: {var x$4538 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[5][0]));
var y$4539 = SmlPrims.chk_ovf_i32(Math.floor(player$1132[6][0]));
var v$4540;
var displays$4544 = dsps$920[0];
var dists$4545 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(v$4546){var v$4547 = v$4546[0];
var v$4548 = v$4546[1];
var v$4549 = v$4546[2];
var t$8093 = v$4547;
var t$8092;
var t$8091;
var t$8090;
var r$4550 = SmlPrims.chk_ovf_i32(v$4548 - x$4538);
t$8090 = (r$4550 * r$4550);
var t$8089;
var r$4551 = SmlPrims.chk_ovf_i32(v$4549 - y$4539);
t$8089 = (r$4551 * r$4551);
t$8091 = (t$8090 + t$8089);
t$8092 = (Math.sqrt(t$8091));
return [t$8093,t$8092];
},displays$4544);
var v$4552;
var fix$8094 = {};
fix$8094.$mini = function(v$4554,v$4555){lab$mini: while (true) {switch (v$4554[0]) { case 1: {if (v$4555 == null) {return v$4554;
} else {var v$4556 = v$4555;
var t$8095 = [0,v$4556[0]];
var t$8096 = v$4556[1];
var v$4554 = t$8095;
var v$4555 = t$8096;
continue lab$mini;
};
 break; }default: {if (v$4555 == null) {return v$4554;
} else {var v$4559 = v$4554[1];
var v$4560 = v$4559[1];
var v$4561 = v$4555;
var v$4562 = v$4561[0];
var v$4563 = v$4562[0];
var v$4564 = v$4562[1];
var v$4565 = v$4561[1];
if (v$4564 < v$4560) {var t$8097 = [0,[v$4563,v$4564]];
var t$8098 = v$4565;
var v$4554 = t$8097;
var v$4555 = t$8098;
continue lab$mini;
} else {var t$8099 = v$4554;
var t$8100 = v$4565;
var v$4554 = t$8099;
var v$4555 = t$8100;
continue lab$mini;
};
};
} };
};
};
var mini$4553 = fix$8094.$mini;
v$4552 = (mini$4553([1],dists$4545));
switch (v$4552[0]) { case 0: {var v$4566 = v$4552[1];
var v$4567 = v$4566[0];
v$4540 = [0,v$4567];
 break; }default: {v$4540 = [1];
} };
switch (v$4540[0]) { case 1: {return 0;
 break; }default: {var v$4568 = v$4540[1];
var v$4569 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$4572){return v$4568 == v$4572[1];
},displayContent$1180);
switch (v$4569[0]) { case 1: {return 0;
 break; }default: {var v$4576 = v$4569[1];
var v$7175 = v$4576[1];
var v$7176 = v$4576[2];
var v$7177 = v$4576[0];
var v$7178 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$7179){return v$7179[1] == v$7175;
},staff$1177);
switch (v$7178[0]) { case 1: {0;
 break; }default: {var v$7180 = v$7178[1];
var v$7181 = v$7180[4];
var did$7182 = v$7177[0];
var fix$8101 = {};
fix$8101.$loop = function(v$7184){lab$loop: while (true) {if (v$7184 == null) {return (v$7181 == null)?0:(v$7177[0] = v$7181[0][0],0);
} else {var v$7185 = v$7184;
var v$7186 = v$7185[1];
if (v$7186 == null) {return (v$7181 == null)?0:(v$7177[0] = v$7181[0][0],0);
} else {var v$7187 = v$7185[0];
var v$7188 = v$7186;
var v$7189 = v$7188[0];
var v$7190 = v$7188[1];
if (v$7187[0] == did$7182) {return (v$7177[0] = v$7189[0],0);
} else {var t$8102 = [v$7189,v$7190];
var v$7184 = t$8102;
continue lab$loop;
};
};
};
};
};
var loop$7183 = fix$8101.$loop;
loop$7183(v$7181);
(v$7176[0] = 0,0);
} };
return startSpeak$1181(v$4576[1],v$4576[2],v$4576[0]);
} };
} };
 break; }default: {return 0;
} };
});
(function(f){document.onkeyup = function(e) { e = e || window.event; f(e.keyCode); };})(function(v$1240){switch (v$1240) { case 38: {return (player$1132[4][0] = 0.0,0);
 break; }case 40: {return (player$1132[4][0] = 0.0,0);
 break; }case 37: {(player$1132[3][0] = 0.0,0);
return (player$1132[2][0] = 0.0,0);
 break; }case 39: {(player$1132[3][0] = 0.0,0);
return (player$1132[2][0] = 0.0,0);
 break; }default: {return 0;
} };
});
return 0;
};
var checkCollision$1375 = function(spriteMap$1378,v$7732,v$7733,v$7734,v$7735,v$7736){if ((v$7735 < 0.0)?true:((v$7735 >= mapHeightR$1151)?true:((v$7734 < 0.0)?true:(v$7734 >= mapWidthR$1149)))) {return [v$7732,v$7733];
} else {var blockX$1390 = SmlPrims.chk_ovf_i32(Math.floor(v$7734));
var blockY$1391 = SmlPrims.chk_ovf_i32(Math.floor(v$7735));
var t$8205;
if ((blockY$1391 < 0.0)?true:((blockY$1391 >= mapHeightR$1151)?true:((blockX$1390 < 0.0)?true:(blockX$1390 >= mapWidthR$1149)))) {t$8205 = true;
} else {var Y$7194 = SmlPrims.chk_ovf_i32(Math.floor(blockY$1391));
var X$7195 = SmlPrims.chk_ovf_i32(Math.floor(blockX$1390));
var wt$7196;
var v$7197 = v$2686[0][0];
v$2686[0][1];
v$2686[0][2];
var v$7198 = v$7197.length;
if ((0 <= Y$7194)?(Y$7194 < v$7198):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
var v$7199 = v$7197[Y$7194];
var v$7200 = v$7199.length;
if ((0 <= X$7195)?(X$7195 < v$7200):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
wt$7196 = v$7199[X$7195];
var t$8206;
switch (wt$7196[0]) { case 9: {t$8206 = false;
 break; }case 8: {t$8206 = false;
 break; }default: {t$8206 = true;
} };
if (t$8206) {t$8205 = true;
} else {var v$7201;
var v$7202 = spriteMap$1378[0][0];
spriteMap$1378[0][1];
spriteMap$1378[0][2];
var v$7203 = v$7202.length;
if ((0 <= Y$7194)?(Y$7194 < v$7203):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
var v$7204 = v$7202[Y$7194];
var v$7205 = v$7204.length;
if ((0 <= X$7195)?(X$7195 < v$7205):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
v$7201 = v$7204[X$7195];
switch (v$7201[0]) { case 0: {t$8205 = v$7201[1][0];
 break; }default: {t$8205 = false;
} };
};
};
if (t$8205) {return [v$7732,v$7733];
} else {var blockTop$1397;
var v$7394 = blockY$1391 - 1.0;
if ((v$7394 < 0.0)?true:((v$7394 >= mapHeightR$1151)?true:((blockX$1390 < 0.0)?true:(blockX$1390 >= mapWidthR$1149)))) {blockTop$1397 = true;
} else {var Y$7209 = SmlPrims.chk_ovf_i32(Math.floor(v$7394));
var X$7210 = SmlPrims.chk_ovf_i32(Math.floor(blockX$1390));
var wt$7211;
var v$7212 = v$2686[0][0];
v$2686[0][1];
v$2686[0][2];
var v$7213 = v$7212.length;
if ((0 <= Y$7209)?(Y$7209 < v$7213):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
var v$7214 = v$7212[Y$7209];
var v$7215 = v$7214.length;
if ((0 <= X$7210)?(X$7210 < v$7215):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
wt$7211 = v$7214[X$7210];
var t$8207;
switch (wt$7211[0]) { case 9: {t$8207 = false;
 break; }case 8: {t$8207 = false;
 break; }default: {t$8207 = true;
} };
if (t$8207) {blockTop$1397 = true;
} else {var v$7216;
var v$7217 = spriteMap$1378[0][0];
spriteMap$1378[0][1];
spriteMap$1378[0][2];
var v$7218 = v$7217.length;
if ((0 <= Y$7209)?(Y$7209 < v$7218):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
var v$7219 = v$7217[Y$7209];
var v$7220 = v$7219.length;
if ((0 <= X$7210)?(X$7210 < v$7220):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
v$7216 = v$7219[X$7210];
switch (v$7216[0]) { case 0: {blockTop$1397 = v$7216[1][0];
 break; }default: {blockTop$1397 = false;
} };
};
};
var blockBottom$1398;
var v$7396 = blockY$1391 + 1.0;
if ((v$7396 < 0.0)?true:((v$7396 >= mapHeightR$1151)?true:((blockX$1390 < 0.0)?true:(blockX$1390 >= mapWidthR$1149)))) {blockBottom$1398 = true;
} else {var Y$7224 = SmlPrims.chk_ovf_i32(Math.floor(v$7396));
var X$7225 = SmlPrims.chk_ovf_i32(Math.floor(blockX$1390));
var wt$7226;
var v$7227 = v$2686[0][0];
v$2686[0][1];
v$2686[0][2];
var v$7228 = v$7227.length;
if ((0 <= Y$7224)?(Y$7224 < v$7228):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
var v$7229 = v$7227[Y$7224];
var v$7230 = v$7229.length;
if ((0 <= X$7225)?(X$7225 < v$7230):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
wt$7226 = v$7229[X$7225];
var t$8208;
switch (wt$7226[0]) { case 9: {t$8208 = false;
 break; }case 8: {t$8208 = false;
 break; }default: {t$8208 = true;
} };
if (t$8208) {blockBottom$1398 = true;
} else {var v$7231;
var v$7232 = spriteMap$1378[0][0];
spriteMap$1378[0][1];
spriteMap$1378[0][2];
var v$7233 = v$7232.length;
if ((0 <= Y$7224)?(Y$7224 < v$7233):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
var v$7234 = v$7232[Y$7224];
var v$7235 = v$7234.length;
if ((0 <= X$7225)?(X$7225 < v$7235):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
v$7231 = v$7234[X$7225];
switch (v$7231[0]) { case 0: {blockBottom$1398 = v$7231[1][0];
 break; }default: {blockBottom$1398 = false;
} };
};
};
var blockLeft$1399;
var v$7397 = blockX$1390 - 1.0;
if ((blockY$1391 < 0.0)?true:((blockY$1391 >= mapHeightR$1151)?true:((v$7397 < 0.0)?true:(v$7397 >= mapWidthR$1149)))) {blockLeft$1399 = true;
} else {var Y$7239 = SmlPrims.chk_ovf_i32(Math.floor(blockY$1391));
var X$7240 = SmlPrims.chk_ovf_i32(Math.floor(v$7397));
var wt$7241;
var v$7242 = v$2686[0][0];
v$2686[0][1];
v$2686[0][2];
var v$7243 = v$7242.length;
if ((0 <= Y$7239)?(Y$7239 < v$7243):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
var v$7244 = v$7242[Y$7239];
var v$7245 = v$7244.length;
if ((0 <= X$7240)?(X$7240 < v$7245):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
wt$7241 = v$7244[X$7240];
var t$8209;
switch (wt$7241[0]) { case 9: {t$8209 = false;
 break; }case 8: {t$8209 = false;
 break; }default: {t$8209 = true;
} };
if (t$8209) {blockLeft$1399 = true;
} else {var v$7246;
var v$7247 = spriteMap$1378[0][0];
spriteMap$1378[0][1];
spriteMap$1378[0][2];
var v$7248 = v$7247.length;
if ((0 <= Y$7239)?(Y$7239 < v$7248):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
var v$7249 = v$7247[Y$7239];
var v$7250 = v$7249.length;
if ((0 <= X$7240)?(X$7240 < v$7250):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
v$7246 = v$7249[X$7240];
switch (v$7246[0]) { case 0: {blockLeft$1399 = v$7246[1][0];
 break; }default: {blockLeft$1399 = false;
} };
};
};
var blockRight$1400;
var v$7399 = blockX$1390 + 1.0;
if ((blockY$1391 < 0.0)?true:((blockY$1391 >= mapHeightR$1151)?true:((v$7399 < 0.0)?true:(v$7399 >= mapWidthR$1149)))) {blockRight$1400 = true;
} else {var Y$7254 = SmlPrims.chk_ovf_i32(Math.floor(blockY$1391));
var X$7255 = SmlPrims.chk_ovf_i32(Math.floor(v$7399));
var wt$7256;
var v$7257 = v$2686[0][0];
v$2686[0][1];
v$2686[0][2];
var v$7258 = v$7257.length;
if ((0 <= Y$7254)?(Y$7254 < v$7258):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
var v$7259 = v$7257[Y$7254];
var v$7260 = v$7259.length;
if ((0 <= X$7255)?(X$7255 < v$7260):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
wt$7256 = v$7259[X$7255];
var t$8210;
switch (wt$7256[0]) { case 9: {t$8210 = false;
 break; }case 8: {t$8210 = false;
 break; }default: {t$8210 = true;
} };
if (t$8210) {blockRight$1400 = true;
} else {var v$7261;
var v$7262 = spriteMap$1378[0][0];
spriteMap$1378[0][1];
spriteMap$1378[0][2];
var v$7263 = v$7262.length;
if ((0 <= Y$7254)?(Y$7254 < v$7263):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
var v$7264 = v$7262[Y$7254];
var v$7265 = v$7264.length;
if ((0 <= X$7255)?(X$7255 < v$7265):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
v$7261 = v$7264[X$7255];
switch (v$7261[0]) { case 0: {blockRight$1400 = v$7261[1][0];
 break; }default: {blockRight$1400 = false;
} };
};
};
var toY$1401 = (blockTop$1397?((v$7735 - blockY$1391) < v$7736):false)?(blockY$1391 + v$7736):((blockBottom$1398?(((blockY$1391 + 1.0) - v$7735) < v$7736):false)?((blockY$1391 + 1.0) - v$7736):v$7735);
return [(blockLeft$1399?((v$7734 - blockX$1390) < v$7736):false)?(blockX$1390 + v$7736):((blockRight$1400?(((blockX$1390 + 1.0) - v$7734) < v$7736):false)?((blockX$1390 + 1.0) - v$7736):v$7734),toY$1401];
};
};
};
var drawMiniMap$1668 = function(){if (h9AP67nN46MQi5f2NQrocNd$3university$0university$1.minimap_p$223?false:true) {return 0;
} else {var miniMap$1675;
var v$4763 = (function(d,id){return SmlPrims.option(d.getElementById(id));})(z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86,"minimap");
switch (v$4763[0]) { case 0: {miniMap$1675 = v$4763[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"no element with id 'minimap' in DOM"];
} };
var miniMapCtr$1676;
var v$4769 = (function(d,id){return SmlPrims.option(d.getElementById(id));})(z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86,"minimapcontainer");
switch (v$4769[0]) { case 0: {miniMapCtr$1676 = v$4769[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"no element with id 'minimapcontainer' in DOM"];
} };
var miniMapObjects$1677;
var v$4775 = (function(d,id){return SmlPrims.option(d.getElementById(id));})(z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86,"minimapobjects");
switch (v$4775[0]) { case 0: {miniMapObjects$1677 = v$4775[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"no element with id 'minimapobjects' in DOM"];
} };
var w$1678 = SmlPrims.chk_ovf_i32(mapWidth$1148 * 8);
var h$1679 = SmlPrims.chk_ovf_i32(mapHeight$1150 * 8);
(function(fp,s,v){fp[s] = v;})(miniMap$1675,"width",w$1678);
(function(fp,s,v){fp[s] = v;})(miniMap$1675,"height",h$1679);
(function(fp,s,v){fp[s] = v;})(miniMapObjects$1677,"width",w$1678);
(function(fp,s,v){fp[s] = v;})(miniMapObjects$1677,"height",h$1679);
(function(fp,s,v){fp[s] = v;})(miniMapCtr$1676,"width",w$1678);
(function(fp,s,v){fp[s] = v;})(miniMapCtr$1676,"height",h$1679);
var w_s$1686 = ((w$1678 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(w$1678))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(w$1678))) + "px";
var h_s$1687 = ((h$1679 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(h$1679))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(h$1679))) + "px";
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(miniMap$1675,"style"),"width",w_s$1686);
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(miniMapObjects$1677,"style"),"width",w_s$1686);
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(miniMapCtr$1676,"style"),"width",w_s$1686);
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(miniMap$1675,"style"),"height",h_s$1687);
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(miniMapObjects$1677,"style"),"height",h_s$1687);
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(miniMapCtr$1676,"style"),"height",h_s$1687);
var c$1694 = (function(e,s){return e.getContext(s);})(miniMap$1675,"2d");
var entireMap$1695 = function(v$7934){return [v$2686,0,[1],[1],0];
};
Y5y0a7l58ITwhpccCWLDEa$3basis$0Array2$1.appi$512(0,function(v$7841){var v$7842 = v$7841[0];
var v$7843 = v$7841[1];
var v$7844 = v$7841[2];
var t$8211;
switch (v$7844[0]) { case 9: {t$8211 = false;
 break; }case 8: {t$8211 = false;
 break; }default: {t$8211 = true;
} };
if (t$8211) {(function(c,s){c.fillStyle = s;})(c$1694,"rgb(200,200,200)");
return (function(c,a1,a2,a3,a4){c.fillRect(a1,a2,a3,a4);})(c$1694,SmlPrims.chk_ovf_i32(v$7843 * 8),SmlPrims.chk_ovf_i32(v$7842 * 8),8,8);
} else {return 0;
};
},(entireMap$1695(0))[0],(entireMap$1695(0))[4],(entireMap$1695(0))[1],(entireMap$1695(0))[3],(entireMap$1695(0))[2]);
if (h9AP67nN46MQi5f2NQrocNd$3university$0university$1.minimap_p$223?false:true) {return 0;
} else {var miniMap$7267;
var v$7268 = (function(d,id){return SmlPrims.option(d.getElementById(id));})(z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86,"minimap");
switch (v$7268[0]) { case 0: {miniMap$7267 = v$7268[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"no element with id 'minimap' in DOM"];
} };
var miniMapObjects$7269;
var v$7270 = (function(d,id){return SmlPrims.option(d.getElementById(id));})(z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86,"minimapobjects");
switch (v$7270[0]) { case 0: {miniMapObjects$7269 = v$7270[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"no element with id 'minimapobjects' in DOM"];
} };
var height$7271 = (function(fp,s){return fp[s];})(miniMap$7267,"height");
var width$7272 = (function(fp,s){return fp[s];})(miniMap$7267,"width");
var c$7273 = (function(e,s){return e.getContext(s);})(miniMapObjects$7269,"2d");
(function(c,a1,a2,a3,a4){c.clearRect(a1,a2,a3,a4);})(c$7273,0,0,width$7272,height$7271);
(function(c,a1,a2,a3,a4){c.fillRect(a1,a2,a3,a4);})(c$7273,y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615((player$1132[5][0] * miniMapScaleR$1146) - 2.0),y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615((player$1132[6][0] * miniMapScaleR$1146) - 2.0),4,4);
(function(c){c.beginPath();})(c$7273);
(function(c,a1,a2){c.moveTo(a1,a2);})(c$7273,y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615(player$1132[5][0] * miniMapScaleR$1146),y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615(player$1132[6][0] * miniMapScaleR$1146));
(function(c,a1,a2){c.lineTo(a1,a2);})(c$7273,y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615((player$1132[5][0] + (Math.cos(player$1132[1][0]))) * miniMapScaleR$1146),y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615((player$1132[6][0] + (Math.sin(player$1132[1][0]))) * miniMapScaleR$1146));
(function(c){c.closePath();})(c$7273);
return (function(c){c.stroke();})(c$7273);
};
};
};
var castSingleRay$1848;
var fix$8212 = {};
fix$8212.$RealMod = function(v$7737,v$7738){lab$RealMod: while (true) {if (v$7737 < v$7738) {return v$7737;
} else {var t$8213 = v$7737 - v$7738;
var t$8214 = v$7738;
var v$7737 = t$8213;
var v$7738 = t$8214;
continue lab$RealMod;
};
};
};
var RealMod$1730 = fix$8212.$RealMod;
castSingleRay$1848 = (function(displayContent$1851){return function(screenStrips$1854){return function(spriteMap$1857){return function(v$1862){var v$2372 = v$1862[0];
var v$2373 = v$1862[1];
var v$2374 = v$1862[2];
var rayAngle$1863 = RealMod$1730(v$2372,twoPI$1142);
var rayAngle$1864 = (rayAngle$1863 < 0.0)?(rayAngle$1863 + twoPI$1142):rayAngle$1863;
var right$1869 = (rayAngle$1864 > (twoPI$1142 * 0.75))?true:(rayAngle$1864 < (twoPI$1142 * 0.25));
var up$1874 = (rayAngle$1864 < 0.0)?true:(rayAngle$1864 > 3.14159265358979323846);
var angleSin$1879 = Math.sin(rayAngle$1864);
var angleCos$1880 = Math.cos(rayAngle$1864);
var slope$1881 = angleSin$1879 / angleCos$1880;
var dXVer$1882 = right$1869?1.0:(-1.0);
var dYVer$1887 = dXVer$1882 * slope$1881;
var x$1888 = right$1869?(SmlPrims.chk_ovf_i32(Math.ceil(player$1132[5][0]))):(SmlPrims.chk_ovf_i32(Math.floor(player$1132[5][0])));
var x$1901 = x$1888;
var y$1902 = player$1132[6][0] + ((x$1901 - player$1132[5][0]) * slope$1881);
var emptyHit$1913 = [0.0,0,false,0.0,[9],0.0,0,0.0,0];
var v$2369;
var fix$8215 = {};
fix$8215.$loopV = function(v$7741,v$7742,visibleSprites$1930){lab$loopV: while (true) {if ((v$7741 < 0.0)?true:((v$7741 >= mapWidthR$1149)?true:((v$7742 < 0.0)?true:(v$7742 >= mapHeightR$1151)))) {return [emptyHit$1913,visibleSprites$1930];
} else {var wallX$1935 = SmlPrims.chk_ovf_i32(Math.floor(right$1869?v$7741:(v$7741 - 1.0)));
var wallY$1940 = SmlPrims.chk_ovf_i32(Math.floor(v$7742));
var wt$1941;
var v$4994 = v$2686[0][0];
v$2686[0][1];
v$2686[0][2];
var v$4996 = v$4994.length;
if ((0 <= wallY$1940)?(wallY$1940 < v$4996):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
var v$4998 = v$4994[wallY$1940];
var v$4999 = v$4998.length;
if ((0 <= wallX$1935)?(wallX$1935 < v$4999):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
wt$1941 = v$4998[wallX$1935];
var t$8216;
switch (wt$1941[0]) { case 9: {t$8216 = false;
 break; }case 8: {t$8216 = false;
 break; }default: {t$8216 = true;
} };
if (t$8216) {var distX$1946 = v$7741 - player$1132[5][0];
var distY$1951 = v$7742 - player$1132[6][0];
var dist$1956 = (distX$1946 * distX$1946) + (distY$1951 * distY$1951);
var textureX$1957 = v$7742 - (SmlPrims.chk_ovf_i32(Math.floor(v$7742)));
var textureX$1958 = (right$1869?false:true)?(1.0 - textureX$1957):textureX$1957;
return [[dist$1956,0,(rayAngle$1864 < (3.14159265358979323846 / 2.0))?true:(rayAngle$1864 > ((3.0 * 3.14159265358979323846) / 2.0)),textureX$1958,wt$1941,v$7741,wallX$1935,v$7742,wallY$1940],visibleSprites$1930];
} else {var t$8219 = v$7741 + dXVer$1882;
var t$8218 = v$7742 + dYVer$1887;
var t$8217;
var v$1981;
var v$5010 = spriteMap$1857[0][0];
spriteMap$1857[0][1];
spriteMap$1857[0][2];
var v$5012 = v$5010.length;
if ((0 <= wallY$1940)?(wallY$1940 < v$5012):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
var v$5014 = v$5010[wallY$1940];
var v$5015 = v$5014.length;
if ((0 <= wallX$1935)?(wallX$1935 < v$5015):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
v$1981 = v$5014[wallX$1935];
switch (v$1981[0]) { case 1: {t$8217 = visibleSprites$1930;
 break; }default: {var v$1996 = v$1981[1];
if (v$1996[4][0]) {t$8217 = visibleSprites$1930;
} else {(v$1996[4][0] = true,0);
t$8217 = [v$1996,visibleSprites$1930];
};
} };
var t$8220 = t$8219;
var t$8221 = t$8218;
var t$8222 = t$8217;
var v$7741 = t$8220;
var v$7742 = t$8221;
var visibleSprites$1930 = t$8222;
continue lab$loopV;
};
};
};
};
var loopV$1923 = fix$8215.$loopV;
v$2369 = (loopV$1923(x$1901,y$1902,v$2374));
var v$2370 = v$2369[0];
var v$2371 = v$2369[1];
var slope$2014 = angleCos$1880 / angleSin$1879;
var dYHor$2015 = up$1874?(-1.0):1.0;
var dXHor$2020 = dYHor$2015 * slope$2014;
var y$2021 = up$1874?(SmlPrims.chk_ovf_i32(Math.floor(player$1132[6][0]))):(SmlPrims.chk_ovf_i32(Math.ceil(player$1132[6][0])));
var x$2034 = player$1132[5][0] + ((y$2021 - player$1132[6][0]) * slope$2014);
var v$2357;
var fix$8223 = {};
fix$8223.$loopH = function(v$7745,v$7746,visibleSprites$2050){lab$loopH: while (true) {if ((v$7745 < 0.0)?true:((v$7745 >= mapWidthR$1149)?true:((v$7746 < 0.0)?true:((v$7746 >= mapHeightR$1151)?true:((slope$2014 > 10000.0)?true:(up$1874?((v$7746 - 1.0) < 0.0):false)))))) {return [v$2370,visibleSprites$2050];
} else {var wallY$2055 = SmlPrims.chk_ovf_i32(Math.floor(up$1874?(v$7746 - 1.0):v$7746));
var wallX$2060 = SmlPrims.chk_ovf_i32(Math.floor(v$7745));
var wt$2061;
try {var v$5030 = v$2686[0][0];
v$2686[0][1];
v$2686[0][2];
var v$5032 = v$5030.length;
if ((0 <= wallY$2055)?(wallY$2055 < v$5032):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
var v$5034 = v$5030[wallY$2055];
var v$5035 = v$5034.length;
if ((0 <= wallX$2060)?(wallX$2060 < v$5035):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
wt$2061 = v$5034[wallX$2060];
} catch(v$8224) {wt$2061 = (((function(env$8229){return function(s$m$2064){var v$8225 = env$8229[0];
var v$8226 = env$8229[1];
var v$8227 = env$8229[2];
var v$8228 = env$8229[3];
var s$5036 = (("wallX = " + ((v$8228 < 0)?("-" + (v$8227(SmlPrims.chk_ovf_i32(-(v$8228))))):(v$8227(v$8228)))) + "; wallY = ") + ((v$8226 < 0)?("-" + (v$8227(SmlPrims.chk_ovf_i32(-(v$8226))))):(v$8227(v$8226)));
var log$5037;
var v$5039 = (function(d,id){return SmlPrims.option(d.getElementById(id));})(v$8225,"log");
switch (v$5039[0]) { case 0: {log$5037 = v$5039[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"no element with id 'log' in DOM"];
} };
(function(e,a){return e.appendChild(a);})(log$5037,document.createTextNode(s$5036));
(function(e,a){return e.appendChild(a);})(log$5037,document.createElement("br"));
throw s$m$2064;
};
})([z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86,wallY$2055,abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456,wallX$2060]))(v$8224));
};
var t$8230;
switch (wt$2061[0]) { case 9: {t$8230 = false;
 break; }case 8: {t$8230 = false;
 break; }default: {t$8230 = true;
} };
if (t$8230) {var distX$2071 = v$7745 - player$1132[5][0];
var distY$2076 = v$7746 - player$1132[6][0];
var blockDist$2081 = (distX$2071 * distX$2071) + (distY$2076 * distY$2076);
if (((v$2370[0] > 0.0)?false:true)?true:(blockDist$2081 < v$2370[0])) {var textureX$2086 = v$7745 - (SmlPrims.chk_ovf_i32(Math.floor(v$7745)));
return [[blockDist$2081,1,rayAngle$1864 < 3.14159265358979323846,1.0 - (up$1874?(1.0 - textureX$2086):textureX$2086),wt$2061,v$7745,wallX$2060,v$7746,wallY$2055],visibleSprites$2050];
} else {return [v$2370,visibleSprites$2050];
};
} else {var t$8233 = v$7745 + dXHor$2020;
var t$8232 = v$7746 + dYHor$2015;
var t$8231;
var v$2119;
var v$5061 = spriteMap$1857[0][0];
spriteMap$1857[0][1];
spriteMap$1857[0][2];
var v$5063 = v$5061.length;
if ((0 <= wallY$2055)?(wallY$2055 < v$5063):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
var v$5065 = v$5061[wallY$2055];
var v$5066 = v$5065.length;
if ((0 <= wallX$2060)?(wallX$2060 < v$5066):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
v$2119 = v$5065[wallX$2060];
switch (v$2119[0]) { case 1: {t$8231 = visibleSprites$2050;
 break; }default: {var v$2134 = v$2119[1];
if (v$2134[4][0]) {t$8231 = visibleSprites$2050;
} else {(v$2134[4][0] = true,0);
t$8231 = [v$2134,visibleSprites$2050];
};
} };
var t$8234 = t$8233;
var t$8235 = t$8232;
var t$8236 = t$8231;
var v$7745 = t$8234;
var v$7746 = t$8235;
var visibleSprites$2050 = t$8236;
continue lab$loopH;
};
};
};
};
var loopH$2043 = fix$8223.$loopH;
v$2357 = (loopH$2043(x$2034,y$2021,v$2371));
var v$2358 = v$2357[0];
var v$2359 = v$2358[0];
var v$2360 = v$2358[5];
var v$2361 = v$2358[7];
var v$2362 = v$2358[6];
var v$2363 = v$2358[8];
var v$2364 = v$2358[4];
var v$2365 = v$2358[3];
var v$2366 = v$2358[2];
var v$2367 = v$2358[1];
var v$2368 = v$2357[1];
if (v$2359 <= 0.0) {return v$2368;
} else {var dist$2176 = Math.sqrt(v$2359);
var dist$2177 = dist$2176 * (Math.cos(player$1132[1][0] - rayAngle$1864));
var height$2182 = y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615(viewDist$1155 / dist$2177);
var width$2183 = SmlPrims.chk_ovf_i32(height$2182 * 1);
var widthR$2184 = width$2183;
var heightR$2185 = height$2182;
var top$2186 = y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615((screenHeightR$1153 - heightR$2185) / 2.0);
var texX$2187 = y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615(v$2365 * widthR$2184);
var texX$2188 = (texX$2187 > (SmlPrims.chk_ovf_i32(width$2183 - 1)))?(SmlPrims.chk_ovf_i32(width$2183 - 1)):texX$2187;
var v$5079 = screenStrips$1854.length;
if ((0 <= v$2373)?(v$2373 < v$5079):false) {0;
} else {throw CompilerInitial.exn$Subscript$50;
};
var stripdata$2193 = screenStrips$1854[v$2373];
var wallType$2194;
if (v$2366) {switch (v$2364[0]) { case 13: {var v$2210 = v$2364[1];
wallType$2194 = [12,v$2210];
 break; }case 12: {var v$2208 = v$2364[1];
wallType$2194 = [13,v$2208];
 break; }default: {wallType$2194 = v$2364;
} };
} else {wallType$2194 = v$2364;
};
var v$2292;
switch (wallType$2194[0]) { case 13: {var v$2356 = wallType$2194[1];
var v$5099 = stripdata$2193[0];
var v$5100 = stripdata$2193[1];
var s$5101;
var dir$5112;
switch (v$2367) { case 0: {dir$5112 = ((player$1132[5][0] > v$2360)?3:0);
 break; }default: {dir$5112 = ((player$1132[6][0] > v$2361)?1:2);
} };
var v$5113 = v$2356(dir$5112);
switch (v$5113[0]) { case 0: {var v$5114 = v$5113[1];
var v$5115 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$5118){return v$5114 == v$5118[1];
},displayContent$1851);
switch (v$5115[0]) { case 0: {var v$5122 = v$5115[1];
var v$5123 = v$5122[2];
var v$5124 = v$5122[0];
var b$5125 = v$5124[0];
var i$5126 = v$5123[0];
var t$8246;
var t$8245 = ((((("data/" + v$5114) + "/") + b$5125) + "/") + b$5125) + "-";
var t$8244;
var fix$8242 = {};
fix$8242.$prefixzeros = function(s$7286){lab$prefixzeros: while (true) {if (s$7286.length < 3) {var t$8243 = "0" + s$7286;
var s$7286 = t$8243;
continue lab$prefixzeros;
} else {return s$7286;
};
};
};
var prefixzeros$7285 = fix$8242.$prefixzeros;
t$8244 = (prefixzeros$7285(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(i$5126)));
t$8246 = (t$8245 + t$8244);
s$5101 = (t$8246 + ".png");
 break; }default: {s$5101 = "wall-white.png";
} };
 break; }default: {s$5101 = "wall-white.png";
} };
var r$5102 = v$5100[3];
if (r$5102[0] == s$5101) {0;
} else {(function(e,a,b){return e.setAttribute(a,b);})(v$5099,"src",s$5101);
(r$5102[0] = s$5101,0);
};
v$2292 = [1,0,texX$2188,2.0];
 break; }case 12: {var v$2352 = wallType$2194[1];
var v$5136 = stripdata$2193[0];
var v$5137 = stripdata$2193[1];
var s$5138;
var dir$5149;
switch (v$2367) { case 0: {dir$5149 = ((player$1132[5][0] > v$2360)?3:0);
 break; }default: {dir$5149 = ((player$1132[6][0] > v$2361)?1:2);
} };
var v$5150 = v$2352(dir$5149);
switch (v$5150[0]) { case 0: {var v$5151 = v$5150[1];
var v$5152 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$5155){return v$5151 == v$5155[1];
},displayContent$1851);
switch (v$5152[0]) { case 0: {var v$5159 = v$5152[1];
var v$5160 = v$5159[2];
var v$5161 = v$5159[0];
var b$5162 = v$5161[0];
var i$5163 = v$5160[0];
var t$8241;
var t$8240 = ((((("data/" + v$5151) + "/") + b$5162) + "/") + b$5162) + "-";
var t$8239;
var fix$8237 = {};
fix$8237.$prefixzeros = function(s$7291){lab$prefixzeros: while (true) {if (s$7291.length < 3) {var t$8238 = "0" + s$7291;
var s$7291 = t$8238;
continue lab$prefixzeros;
} else {return s$7291;
};
};
};
var prefixzeros$7290 = fix$8237.$prefixzeros;
t$8239 = (prefixzeros$7290(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(i$5163)));
t$8241 = (t$8240 + t$8239);
s$5138 = (t$8241 + ".png");
 break; }default: {s$5138 = "wall-white.png";
} };
 break; }default: {s$5138 = "wall-white.png";
} };
var r$5139 = v$5137[3];
if (r$5139[0] == s$5138) {0;
} else {(function(e,a,b){return e.setAttribute(a,b);})(v$5136,"src",s$5138);
(r$5139[0] = s$5138,0);
};
v$2292 = [1,0,SmlPrims.chk_ovf_i32(texX$2188 + width$2183),2.0];
 break; }case 1: {var v$5173 = stripdata$2193[0];
var v$5174 = stripdata$2193[1];
var r$5176 = v$5174[3];
if (r$5176[0] == "window-left.png") {0;
} else {(function(e,a,b){return e.setAttribute(a,b);})(v$5173,"src","window-left.png");
(r$5176[0] = "window-left.png",0);
};
v$2292 = [1,0,texX$2188,1.0];
 break; }case 2: {var v$5186 = stripdata$2193[0];
var v$5187 = stripdata$2193[1];
var r$5189 = v$5187[3];
if (r$5189[0] == "window-center.png") {0;
} else {(function(e,a,b){return e.setAttribute(a,b);})(v$5186,"src","window-center.png");
(r$5189[0] = "window-center.png",0);
};
v$2292 = [1,0,texX$2188,1.0];
 break; }case 0: {var v$5199 = stripdata$2193[0];
var v$5200 = stripdata$2193[1];
var r$5202 = v$5200[3];
if (r$5202[0] == "window-right.png") {0;
} else {(function(e,a,b){return e.setAttribute(a,b);})(v$5199,"src","window-right.png");
(r$5202[0] = "window-right.png",0);
};
v$2292 = [1,0,texX$2188,1.0];
 break; }case 7: {var v$5212 = stripdata$2193[0];
var v$5213 = stripdata$2193[1];
var r$5215 = v$5213[3];
if (r$5215[0] == "wall-white.png") {0;
} else {(function(e,a,b){return e.setAttribute(a,b);})(v$5212,"src","wall-white.png");
(r$5215[0] = "wall-white.png",0);
};
v$2292 = [1,0,texX$2188,1.0];
 break; }case 10: {var v$5225 = stripdata$2193[0];
var v$5226 = stripdata$2193[1];
var r$5228 = v$5226[3];
if (r$5228[0] == "wall-shelf1.png") {0;
} else {(function(e,a,b){return e.setAttribute(a,b);})(v$5225,"src","wall-shelf1.png");
(r$5228[0] = "wall-shelf1.png",0);
};
v$2292 = [1,0,texX$2188,1.0];
 break; }case 11: {var v$5238 = stripdata$2193[0];
var v$5239 = stripdata$2193[1];
var r$5241 = v$5239[3];
if (r$5241[0] == "wall-shelf2.png") {0;
} else {(function(e,a,b){return e.setAttribute(a,b);})(v$5238,"src","wall-shelf2.png");
(r$5241[0] = "wall-shelf2.png",0);
};
v$2292 = [1,0,texX$2188,1.0];
 break; }case 3: {var v$5251 = stripdata$2193[0];
var v$5252 = stripdata$2193[1];
var r$5254 = v$5252[3];
if (r$5254[0] == "wall-board.png") {0;
} else {(function(e,a,b){return e.setAttribute(a,b);})(v$5251,"src","wall-board.png");
(r$5254[0] = "wall-board.png",0);
};
v$2292 = [1,0,texX$2188,1.0];
 break; }case 14: {var v$5264 = stripdata$2193[0];
var v$5265 = stripdata$2193[1];
var r$5267 = v$5265[3];
if (r$5267[0] == "wall-bulletin.png") {0;
} else {(function(e,a,b){return e.setAttribute(a,b);})(v$5264,"src","wall-bulletin.png");
(r$5267[0] = "wall-bulletin.png",0);
};
v$2292 = [1,0,texX$2188,1.0];
 break; }case 6: {var v$5277 = stripdata$2193[0];
var v$5278 = stripdata$2193[1];
var r$5280 = v$5278[3];
if (r$5280[0] == "walls.png") {0;
} else {(function(e,a,b){return e.setAttribute(a,b);})(v$5277,"src","walls.png");
(r$5280[0] = "walls.png",0);
};
v$2292 = [4,0,texX$2188,2.0];
 break; }case 5: {var v$5290 = stripdata$2193[0];
var v$5291 = stripdata$2193[1];
var r$5293 = v$5291[3];
if (r$5293[0] == "walls.png") {0;
} else {(function(e,a,b){return e.setAttribute(a,b);})(v$5290,"src","walls.png");
(r$5293[0] = "walls.png",0);
};
v$2292 = [4,1,texX$2188,2.0];
 break; }case 4: {var v$5303 = stripdata$2193[0];
var v$5304 = stripdata$2193[1];
var r$5306 = v$5304[3];
if (r$5306[0] == "walls.png") {0;
} else {(function(e,a,b){return e.setAttribute(a,b);})(v$5303,"src","walls.png");
(r$5306[0] = "walls.png",0);
};
v$2292 = [4,2,texX$2188,2.0];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"obj not supported"];
} };
var v$2293 = v$2292[0];
var v$2294 = v$2292[1];
var v$2295 = v$2292[2];
var v$2296 = v$2292[3];
var v$7295 = stripdata$2193[0];
var v$7296 = stripdata$2193[1];
var r$7298 = v$7296[1];
if (r$7298[0] == height$2182) {0;
} else {var v$7299 = ((height$2182 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(height$2182))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(height$2182))) + "px";
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(v$7295,"style"),"height",v$7299);
(r$7298[0] = height$2182,0);
};
var v$7302 = stripdata$2193[0];
var v$7303 = stripdata$2193[1];
var r$7305 = v$7303[4];
if (r$7305[0] == top$2186) {0;
} else {var v$7306 = ((top$2186 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(top$2186))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(top$2186))) + "px";
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(v$7302,"style"),"top",v$7306);
(r$7305[0] = top$2186,0);
};
var imgTop$2261 = SmlPrims.chk_ovf_i32(Math.floor(heightR$2185 * v$2294));
var styleHeight$2262 = SmlPrims.chk_ovf_i32(Math.floor(heightR$2185 * v$2293));
var v$7309 = stripdata$2193[0];
var v$7310 = stripdata$2193[1];
var r$7312 = v$7310[1];
if (r$7312[0] == styleHeight$2262) {0;
} else {var v$7313 = ((styleHeight$2262 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(styleHeight$2262))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(styleHeight$2262))) + "px";
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(v$7309,"style"),"height",v$7313);
(r$7312[0] = styleHeight$2262,0);
};
var styleWidth$2264 = SmlPrims.chk_ovf_i32(Math.floor(widthR$2184 * v$2296));
var v$7316 = stripdata$2193[0];
var v$7317 = stripdata$2193[1];
var r$7319 = v$7317[5];
if (r$7319[0] == styleWidth$2264) {0;
} else {var v$7320 = ((styleWidth$2264 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(styleWidth$2264))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(styleWidth$2264))) + "px";
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(v$7316,"style"),"width",v$7320);
(r$7319[0] = styleWidth$2264,0);
};
var styleTop$2266 = SmlPrims.chk_ovf_i32(top$2186 - imgTop$2261);
var v$7323 = stripdata$2193[0];
var v$7324 = stripdata$2193[1];
var r$7326 = v$7324[4];
if (r$7326[0] == styleTop$2266) {0;
} else {var v$7327 = ((styleTop$2266 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(styleTop$2266))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(styleTop$2266))) + "px";
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(v$7323,"style"),"top",v$7327);
(r$7326[0] = styleTop$2266,0);
};
var styleLeft$2268 = SmlPrims.chk_ovf_i32((SmlPrims.chk_ovf_i32(v$2373 * 1)) - v$2295);
var v$7330 = stripdata$2193[0];
var v$7331 = stripdata$2193[1];
var r$7333 = v$7331[2];
if (r$7333[0] == styleLeft$2268) {0;
} else {var v$7334 = ((styleLeft$2268 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(styleLeft$2268))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(styleLeft$2268))) + "px";
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(v$7330,"style"),"left",v$7334);
(r$7333[0] = styleLeft$2268,0);
};
var styleClip$2270;
var t$8254;
var t$8253;
var t$8252;
var t$8251;
var t$8250;
var t$8249 = ("rect(" + ((imgTop$2261 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(imgTop$2261))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(imgTop$2261)))) + ",";
var t$8248;
var i$5330 = SmlPrims.chk_ovf_i32(v$2295 + 1);
t$8248 = ((i$5330 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(i$5330))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(i$5330)));
t$8250 = (t$8249 + t$8248);
t$8251 = (t$8250 + ",");
var t$8247;
var i$5332 = SmlPrims.chk_ovf_i32(imgTop$2261 + height$2182);
t$8247 = ((i$5332 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(i$5332))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(i$5332)));
t$8252 = (t$8251 + t$8247);
t$8253 = (t$8252 + ",");
t$8254 = (t$8253 + ((v$2295 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(v$2295))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(v$2295))));
styleClip$2270 = (t$8254 + ")");
var v$5337 = stripdata$2193[0];
var v$5338 = stripdata$2193[1];
var r$5340 = v$5338[0];
if (r$5340[0] == styleClip$2270) {0;
} else {(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(v$5337,"style"),"clip",styleClip$2270);
(r$5340[0] = styleClip$2270,0);
};
var dwx$2272 = v$2362 - player$1132[5][0];
var dwy$2277 = v$2363 - player$1132[6][0];
var wallDist$2282 = (dwx$2272 * dwx$2272) + (dwy$2277 * dwy$2277);
var v$7337 = stripdata$2193[0];
var v$7338 = stripdata$2193[1];
var n$7339 = SmlPrims.chk_ovf_i32(-(SmlPrims.chk_ovf_i32(Math.floor(wallDist$2282 * 1000.0))));
var r$7340 = v$7338[6];
if (r$7340[0] == n$7339) {0;
} else {var v$7341 = (n$7339 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(n$7339))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(n$7339));
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(v$7337,"style"),"zIndex",v$7341);
(r$7340[0] = n$7339,0);
};
return v$2368;
};
};
};
};
});
var zero$2404 = SmlPrims.getrealtime();
var gameCycle$2409 = function(spriteMap$2412){var gameCycleDelay$2413 = TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.div$1394([0,[[1000,null],false]],[0,[[30,null],false]]);
var fix$8255 = {};
fix$8255.$cycle = function(lastGameCycleTime$2417){lab$cycle: while (true) {var n$2420;
var v$7641;
var v$7874 = SmlPrims.getrealtime();
v$7641 = (g14hFoVCUPM3ZC3WsORS6h$3basis$0Time$1.s$g$309(v$7874[0],v$7874[1],zero$2404[0],zero$2404[1]));
n$2420 = (g14hFoVCUPM3ZC3WsORS6h$3basis$0Time$1.toMilliseconds$97(v$7641[0],v$7641[1]));
var timeDelta$2421 = TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.s$g$1258(lastGameCycleTime$2417,n$2420);
var mul$5368 = (xe4rCkobvAWmCENzbhJ8Ed$3basis$0IntInf$1.toInt$1823(timeDelta$2421)) / (xe4rCkobvAWmCENzbhJ8Ed$3basis$0IntInf$1.toInt$1823(gameCycleDelay$2413));
var moveStep$5370 = (mul$5368 * player$1132[4][0]) * player$1132[0];
var t$8257 = player$1132[3];
var t$8256;
var a$5372 = player$1132[3][0] + player$1132[2][0];
t$8256 = ((a$5372 > 0.0)?((a$5372 > 2.0)?2.0:a$5372):((a$5372 < (-(2.0)))?(-(2.0)):a$5372));
(t$8257[0] = t$8256,0);
var drot$5374 = (mul$5368 * player$1132[3][0]) * MaxRotSpeed$1131;
var v$6661 = player$1132[1];
(v$6661[0] = (v$6661[0] + drot$5374),0);
var dx$5379 = (Math.cos(player$1132[1][0])) * moveStep$5370;
var dy$5380 = (Math.sin(player$1132[1][0])) * moveStep$5370;
var fromX$5381 = player$1132[5][0];
var fromY$5382 = player$1132[6][0];
var v$5383 = checkCollision$1375(spriteMap$2412,fromX$5381,fromY$5382,fromX$5381 + dx$5379,fromY$5382 + dy$5380,0.35);
var v$5384 = v$5383[0];
var v$5385 = v$5383[1];
(player$1132[5][0] = v$5384,0);
(player$1132[6][0] = v$5385,0);
var cycleDelay$2422 = (TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.s$l$1462(timeDelta$2421,gameCycleDelay$2413))?(xe4rCkobvAWmCENzbhJ8Ed$3basis$0IntInf$1.max$2267([0,[[1,null],false]],TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.s$g$1258(TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.s$g$1258(gameCycleDelay$2413,timeDelta$2421),gameCycleDelay$2413))):gameCycleDelay$2413;
(function(i,f){return setTimeout(f,i);})(xe4rCkobvAWmCENzbhJ8Ed$3basis$0IntInf$1.toInt$1823(cycleDelay$2422),(function(env$8260){return function(v$7648){var v$8258 = env$8260[0];
var v$8259 = env$8260[1];
return v$8259(v$8258);
};
})([n$2420,fix$8255.$cycle]));
return 0;
};
};
var cycle$2414 = fix$8255.$cycle;
return cycle$2414([0,[null,false]]);
};
var updateOverlay$2448;
var old$5404 = [""];
updateOverlay$2448 = (function(v$5405){var s$5406;
var v$7344 = v$5405[0];
var v$7345 = v$5405[1];
s$5406 = ((((("FPS: " + ((y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.fmt$169([2,[0,0]]))(v$7344))) + " | SCORE: ") + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(v$7345))) + " | ") + h9AP67nN46MQi5f2NQrocNd$3university$0university$1.deviceStr$222);
if (old$5404[0] == s$5406) {return 0;
} else {var e$5410;
var v$5412 = (function(d,id){return SmlPrims.option(d.getElementById(id));})(z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86,"overlay");
switch (v$5412[0]) { case 0: {e$5410 = v$5412[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"no element with id 'overlay' in DOM"];
} };
(function(e,s){e.innerHTML = s;})(e$5410,s$5406);
return (old$5404[0] = s$5406,0);
};
});
var renderSprites$2455 = function(oldSprites$2458,sprites$2461){var v$5424 = function(v$7750,v$7928,v$7929){var dx$5435 = (v$7928 + 0.5) - player$1132[5][0];
var dy$5439 = (v$7929 + 0.5) - player$1132[6][0];
var dist$5443 = Math.sqrt((dx$5435 * dx$5435) + (dy$5439 * dy$5439));
var spriteAngle$5444 = (Math.atan2(dy$5439,dx$5435)) - player$1132[1][0];
var size$5448 = viewDist$1155 / ((Math.cos(spriteAngle$5444)) * dist$5443);
if (size$5448 <= 0.0) {return 0;
} else {(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(v$7750,"style"),"display","block");
var screen_x$5455 = ((Math.sin(spriteAngle$5444)) / (Math.cos(spriteAngle$5444))) * viewDist$1155;
var left$5456 = y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615(((screenWidthR$1152 / 2.0) + screen_x$5455) - (size$5448 / 2.0));
var top$5457 = y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615((screenHeightR$1153 - size$5448) / 2.0);
var v$6702 = ((left$5456 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(left$5456))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(left$5456))) + "px";
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(v$7750,"style"),"left",v$6702);
var v$6708 = ((top$5457 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(top$5457))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(top$5457))) + "px";
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(v$7750,"style"),"top",v$6708);
var dbx$5460 = v$7928 - player$1132[5][0];
var dby$5464 = v$7929 - player$1132[6][0];
var sz$5468;
var t$8261;
var i$5515 = y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615(size$5448);
t$8261 = ((i$5515 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(i$5515))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(i$5515)));
sz$5468 = (t$8261 + "px");
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(v$7750,"style"),"width",sz$5468);
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(v$7750,"style"),"height",sz$5468);
var blockDist$5471 = (dbx$5460 * dbx$5460) + (dby$5464 * dby$5464);
var zIndex$5472 = SmlPrims.chk_ovf_i32(-(SmlPrims.chk_ovf_i32(Math.floor(blockDist$5471 * 1000.0))));
var v$6722 = (zIndex$5472 < 0)?("-" + (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(SmlPrims.chk_ovf_i32(-(zIndex$5472))))):(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(zIndex$5472));
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(v$7750,"style"),"zIndex",v$6722);
return 0;
};
};
var fix$8262 = {};
fix$8262.$app = function(v$5475){lab$app: while (true) {if (v$5475 == null) {return 0;
} else {var v$5476 = v$5475;
var v$5477 = v$5476[0];
var v$5478 = v$5476[1];
var v$7931 = v$5477[3];
v$5424(v$5477[2],v$7931[0],v$7931[1]);
var t$8263 = v$5478;
var v$5475 = t$8263;
continue lab$app;
};
};
};
var app$5474 = fix$8262.$app;
app$5474(sprites$2461);
var fix$8264 = {};
fix$8264.$app = function(v$5543){lab$app: while (true) {if (v$5543 == null) {return 0;
} else {var v$5544 = v$5543;
var v$5545 = v$5544[0];
var v$5546 = v$5544[1];
(v$5545[4][0]?false:true)?((function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(v$5545[2],"style"),"display","none")):0;
var t$8265 = v$5546;
var v$5543 = t$8265;
continue lab$app;
};
};
};
var app$5542 = fix$8264.$app;
return app$5542(oldSprites$2458);
};
var score$2557 = [0];
var renderCycle$2558 = function(displayContent$2561,screenStrips$2564,spriteMap$2567){var renderCycleDelay$2568 = TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.div$1394([0,[[1000,null],false]],[0,[[30,null],false]]);
var fix$8266 = {};
fix$8266.$cycle = function(v$7751,v$7752){lab$cycle: while (true) {if (h9AP67nN46MQi5f2NQrocNd$3university$0university$1.minimap_p$223?false:true) {0;
} else {var miniMap$7347;
var v$7348 = (function(d,id){return SmlPrims.option(d.getElementById(id));})(z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86,"minimap");
switch (v$7348[0]) { case 0: {miniMap$7347 = v$7348[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"no element with id 'minimap' in DOM"];
} };
var miniMapObjects$7349;
var v$7350 = (function(d,id){return SmlPrims.option(d.getElementById(id));})(z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86,"minimapobjects");
switch (v$7350[0]) { case 0: {miniMapObjects$7349 = v$7350[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"no element with id 'minimapobjects' in DOM"];
} };
var height$7351 = (function(fp,s){return fp[s];})(miniMap$7347,"height");
var width$7352 = (function(fp,s){return fp[s];})(miniMap$7347,"width");
var c$7353 = (function(e,s){return e.getContext(s);})(miniMapObjects$7349,"2d");
(function(c,a1,a2,a3,a4){c.clearRect(a1,a2,a3,a4);})(c$7353,0,0,width$7352,height$7351);
(function(c,a1,a2,a3,a4){c.fillRect(a1,a2,a3,a4);})(c$7353,y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615((player$1132[5][0] * miniMapScaleR$1146) - 2.0),y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615((player$1132[6][0] * miniMapScaleR$1146) - 2.0),4,4);
(function(c){c.beginPath();})(c$7353);
(function(c,a1,a2){c.moveTo(a1,a2);})(c$7353,y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615(player$1132[5][0] * miniMapScaleR$1146),y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615(player$1132[6][0] * miniMapScaleR$1146));
(function(c,a1,a2){c.lineTo(a1,a2);})(c$7353,y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615((player$1132[5][0] + (Math.cos(player$1132[1][0]))) * miniMapScaleR$1146),y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615((player$1132[6][0] + (Math.sin(player$1132[1][0]))) * miniMapScaleR$1146));
(function(c){c.closePath();})(c$7353);
(function(c){c.stroke();})(c$7353);
};
var fix$8267 = {};
fix$8267.$app = function(v$5574){lab$app: while (true) {if (v$5574 == null) {return 0;
} else {var v$5575 = v$5574;
var v$5576 = v$5575[0];
var v$5577 = v$5575[1];
(v$5576[4][0] = false,0);
var t$8268 = v$5577;
var v$5574 = t$8268;
continue lab$app;
};
};
};
var app$5573 = fix$8267.$app;
app$5573(v$7752);
var sprites$2578;
var fix$8269 = {};
fix$8269.$loop = function(i$5584,acc$5585){lab$loop: while (true) {if (i$5584 >= numRays$1154) {return acc$5585;
} else {var rayScreenPos$5586 = (((-(numRays$1154)) / 2.0) + i$5584) * stripWidthR$1144;
var rayViewDist$5588 = Math.sqrt((rayScreenPos$5586 * rayScreenPos$5586) + (viewDist$1155 * viewDist$1155));
var rayAngle$5589 = Math.asin(rayScreenPos$5586 / rayViewDist$5588);
var acc$5591 = (((castSingleRay$1848(displayContent$2561))(screenStrips$2564))(spriteMap$2567))([player$1132[1][0] + rayAngle$5589,i$5584,acc$5585]);
var t$8270 = SmlPrims.chk_ovf_i32(i$5584 + 1);
var t$8271 = acc$5591;
var i$5584 = t$8270;
var acc$5585 = t$8271;
continue lab$loop;
};
};
};
var loop$5583 = fix$8269.$loop;
sprites$2578 = (loop$5583(0,null));
renderSprites$2455(v$7752,sprites$2578);
var n$2580;
var v$7659;
var v$7893 = SmlPrims.getrealtime();
v$7659 = (g14hFoVCUPM3ZC3WsORS6h$3basis$0Time$1.s$g$309(v$7893[0],v$7893[1],zero$2404[0],zero$2404[1]));
n$2580 = (g14hFoVCUPM3ZC3WsORS6h$3basis$0Time$1.toMilliseconds$97(v$7659[0],v$7659[1]));
var timeDelta$2581 = TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.s$g$1258(v$7751,n$2580);
var cycleDelay$2582 = (TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.s$l$1462(timeDelta$2581,renderCycleDelay$2568))?(xe4rCkobvAWmCENzbhJ8Ed$3basis$0IntInf$1.max$2267([0,[[1,null],false]],TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.s$g$1258(TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.s$g$1258(renderCycleDelay$2568,timeDelta$2581),renderCycleDelay$2568))):renderCycleDelay$2568;
var cycleDelay$2587 = xe4rCkobvAWmCENzbhJ8Ed$3basis$0IntInf$1.toInt$1823(cycleDelay$2582);
(function(i,f){return setTimeout(f,i);})(cycleDelay$2587,(function(env$8275){return function(v$7926){var v$8272 = env$8275[0];
var v$8273 = env$8275[1];
var v$8274 = env$8275[2];
return v$8274(v$8273,v$8272);
};
})([sprites$2578,n$2580,fix$8266.$cycle]));
return updateOverlay$2448([1000.0 / (xe4rCkobvAWmCENzbhJ8Ed$3basis$0IntInf$1.toInt$1823(timeDelta$2581)),score$2557[0]]);
};
};
var cycle$2569 = fix$8266.$cycle;
return cycle$2569([0,[null,false]],null);
};
var init$2653 = function(){var staff$2656;
try {var t$8282 = h9AP67nN46MQi5f2NQrocNd$3university$0university$1.loadStaff$263;
var t$8281;
var file$5632;
var t$8280 = "data/staff.json?_=";
var t$8279;
var t$8278 = y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.toString$158;
var t$8277;
var v$5635 = SmlPrims.getrealtime();
var v$5636 = v$5635[0];
var v$5637 = v$5635[1];
t$8277 = ((v$5636 - (-2147483648)) + (v$5637 / 1000000.0));
t$8279 = (t$8278(t$8277));
file$5632 = (t$8280 + t$8279);
var r$5638 = SmlPrims.newRequest();
(function(r,m,u,a){return r.open(m,u,a);})(r$5638,"GET",file$5632,false);
z11cymP27JOrM6FBeJkkje$3js$0Js$1.send$652(r$5638,[1]);
var v$5641 = (function(r){return SmlPrims.option(r.responseText);})(r$5638);
switch (v$5641[0]) { case 0: {t$8281 = v$5641[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"serverGet failed on file " + file$5632];
} };
staff$2656 = (t$8282(t$8281));
} catch(v$8276) {staff$2656 = ((function(v$2660){var t$8283 = v$2660;
if (t$8283[0] == sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52) {var msg$2657 = v$2660[1];
var s$5643 = "Failed to load data/staff.json file: " + msg$2657;
var log$5644;
var v$5646 = (function(d,id){return SmlPrims.option(d.getElementById(id));})(z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86,"log");
switch (v$5646[0]) { case 0: {log$5644 = v$5646[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"no element with id 'log' in DOM"];
} };
(function(e,a){return e.appendChild(a);})(log$5644,document.createTextNode(s$5643));
(function(e,a){return e.appendChild(a);})(log$5644,document.createElement("br"));
return null;
} else {throw v$2660;
};
})(v$8276));
};
var v$5671 = (function(d,id){return SmlPrims.option(d.getElementById(id));})(z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86,"screen");
switch (v$5671[0]) { case 0: {v$5671[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"no element with id 'screen' in DOM"];
} };
var screenStrips$2663;
var xs$5654;
var fix$8284 = {};
fix$8284.$loop = function(i$5675){if (i$5675 >= screenWidth$959) {return null;
} else {var strip$5676 = document.createElement("img");
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(strip$5676,"style"),"position","absolute");
(function(fp,s,v){fp[s] = v;})(strip$5676,"src","walls.png");
var stripdata$5685;
var t$8286 = strip$5676;
var t$8285;
var v$5686 = [-1];
var v$5687 = [-1];
var v$5688 = [-1];
var v$5689 = [-1];
var v$5690 = [""];
var v$5691 = [-1];
t$8285 = [v$5690,v$5687,v$5688,["walls.png"],v$5689,v$5686,v$5691];
stripdata$5685 = [t$8286,t$8285];
var v$7356 = stripdata$5685[1];
var r$7358 = v$7356[1];
if (r$7358[0] == 0) {0;
} else {var v$7359 = (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(0)) + "px";
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(strip$5676,"style"),"height",v$7359);
(r$7358[0] = 0,0);
};
var v$7363 = stripdata$5685[1];
var r$7365 = v$7363[2];
if (r$7365[0] == 0) {0;
} else {var v$7366 = (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(0)) + "px";
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(strip$5676,"style"),"left",v$7366);
(r$7365[0] = 0,0);
};
var v$7370 = stripdata$5685[1];
var r$7372 = v$7370[4];
if (r$7372[0] == 0) {0;
} else {var v$7373 = (abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(0)) + "px";
(function(fp,s,v){fp[s] = v;})((function(fp,s){return fp[s];})(strip$5676,"style"),"top",v$7373);
(r$7372[0] = 0,0);
};
var t$8287;
var v$5694 = (function(d,id){return SmlPrims.option(d.getElementById(id));})(z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86,"screen");
switch (v$5694[0]) { case 0: {t$8287 = v$5694[1];
 break; }default: {throw [sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"no element with id 'screen' in DOM"];
} };
(function(e,a){return e.appendChild(a);})(t$8287,strip$5676);
return [stripdata$5685,fix$8284.$loop(SmlPrims.chk_ovf_i32(i$5675 + 1))];
};
};
var loop$5674 = fix$8284.$loop;
xs$5654 = (loop$5674(0));
var fix$8288 = {};
fix$8288.$init = function(v$7755,v$7756,v$7757){lab$init: while (true) {if (v$7755 == null) {return v$7756;
} else {var v$5659 = v$7755;
var v$5660 = v$5659[0];
var v$5661 = v$5659[1];
(v$7756[v$7757] = v$5660,0);
var t$8289 = v$5661;
var t$8290 = v$7756;
var t$8291 = SmlPrims.chk_ovf_i32(v$7757 + 1);
var v$7755 = t$8289;
var v$7756 = t$8290;
var v$7757 = t$8291;
continue lab$init;
};
};
};
var init$5655 = fix$8288.$init;
var t$8297 = init$5655;
var t$8296 = xs$5654;
var t$8295;
var n$5663;
var fix$8292 = {};
fix$8292.$acc = function(v$5665,v$5666){lab$acc: while (true) {if (v$5665 == null) {return v$5666;
} else {var t$8293 = v$5665[1];
var t$8294 = SmlPrims.chk_ovf_i32(v$5666 + 1);
var v$5665 = t$8293;
var v$5666 = t$8294;
continue lab$acc;
};
};
};
var acc$5664 = fix$8292.$acc;
n$5663 = (acc$5664(xs$5654,0));
if ((0 <= n$5663)?(n$5663 <= 123456789):false) {0;
} else {throw CompilerInitial.exn$Size$51;
};
t$8295 = (Array(n$5663));
screenStrips$2663 = (t$8297(t$8296,t$8295,0));
var spriteMap$2664 = init$1072(Y5y0a7l58ITwhpccCWLDEa$3basis$0Array2$1.foldi$383(0,function(v$7845){var v$7846 = v$7845[0];
var v$7847 = v$7845[1];
var v$7848 = v$7845[2];
var v$7849 = v$7845[3];
var v$7850;
switch (v$7848[0]) { case 8: {var v$7851 = v$7848[1];
v$7850 = [0,v$7851];
 break; }default: {v$7850 = [1];
} };
switch (v$7850[0]) { case 0: {return [[v$7850[1],v$7847,v$7846],v$7849];
 break; }default: {return v$7849;
} };
},null,v$2686,0,0,[1],[1]));
var displayContent$2665 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(sid$2668){var v$2670 = [0];
var t$8299;
var t$8298;
var v$5709 = dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(v$5710){return v$5710[1] == sid$2668;
},staff$2656);
switch (v$5709[0]) { case 0: {var v$5715 = v$5709[1];
var v$5716 = v$5715[4];
t$8298 = ((v$5716 == null)?"default":v$5716[0][0]);
 break; }default: {t$8298 = "default";
} };
t$8299 = [t$8298];
return [t$8299,sid$2668,v$2670];
},v$2687);
bindKeys$1174(staff$2656,displayContent$2665);
drawMiniMap$1668();
gameCycle$2409(spriteMap$2664);
return renderCycle$2558(displayContent$2665,screenStrips$2663,spriteMap$2664);
};
(function(a){return window.onload=a;})(function(v$7679){return init$2653();
});
return 0;
})();
